const d=Symbol("AuthRequired");function o(t){if(t.status===401){const n=new Error("Session requise");throw n.code=d,n}}async function w(){const t=await fetch("/api/home",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function p(t="all"){const n=await fetch(`/api/admin/dashboard?scope=${encodeURIComponent(t)}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function u(t){const n=await fetch(`/api/commandes/${t}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({})),a=new Error(e.error||`HTTP ${n.status}`);throw n.status===404&&(a.notFound=!0),a}return n.json()}async function f(t,n,e){const a=await fetch(`/article/${t}/note`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","csrf-token":e||""},credentials:"include",body:JSON.stringify({note:n})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur sauvegarde note")}return a.json()}async function h(){const t=await fetch("/api/commandes",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function l(){const t=await fetch("/api/commandes/caisse",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function T(t,n,e){const a=await fetch(`/api/commandes/${t}/note`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":e||""},credentials:"include",body:JSON.stringify({note:n})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur sauvegarde note")}return a.json()}async function j(t){const n=await fetch(`/api/caisse/ventes-historique/${t}`,{method:"GET",credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function E(t={}){const n=new URLSearchParams;t.limit!=null&&n.set("limit",t.limit),t.offset!=null&&n.set("offset",t.offset),t.date_debut&&n.set("date_debut",t.date_debut),t.date_fin&&n.set("date_fin",t.date_fin),t.numero_ticket&&n.set("numero_ticket",t.numero_ticket),t.caissier_id!=null&&n.set("caissier_id",t.caissier_id);const e=await fetch(`/api/caisse/ventes-historique?${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function m(){const t=await fetch("/api/caisse/produits",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function y(){const t=await fetch("/api/caisse/utilisateurs",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function C(){const t=await fetch("/api/caisse/modes-paiement",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function S(t){const n=await fetch("/api/caisse/ventes",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function k(t){const n=await fetch("/api/caisse/inventaires",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({comment:null})});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function O(t={}){const n=new URLSearchParams(t).toString(),e=await fetch(`/api/caisse/inventaires${n?`?${n}`:""}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function _(t){const n=await fetch(`/api/caisse/inventaires/${t}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw n.status===404?Object.assign(new Error(e.error||"Non trouvé"),{notFound:!0}):new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function N(t,n,e,a){const s={product_id:n,quantite_comptee:e};a!=null&&(s.comment=a);const i=await fetch(`/api/caisse/inventaires/${t}/lignes`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(s)});if(o(i),!i.ok){const r=await i.json().catch(()=>({}));throw new Error(r.error||`HTTP ${i.status}`)}return i.json()}async function A(t){const n=await fetch(`/api/caisse/inventaires/${t}/appliquer`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function P(t={}){const n=new URLSearchParams(t).toString(),e=await fetch(`/api/caisse/stock-mouvements${n?`?${n}`:""}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function $(t){const n=await fetch("/api/caisse/paiements",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function R(t){const n=t?`?adherent_id=${encodeURIComponent(t)}`:"",e=await fetch(`/api/caisse/cotisation/check${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function F(t={}){const n=new URLSearchParams;t.date_debut&&n.set("date_debut",t.date_debut),t.date_fin&&n.set("date_fin",t.date_fin),t.limit&&n.set("limit",String(t.limit));const e=n.toString()?`?${n.toString()}`:"",a=await fetch(`/api/caisse/cotisation/mon-historique${e}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||`HTTP ${a.status}`)}return a.json()}async function K(t){const n=await fetch(`/api/caisse/commandes-utilisateur?user_id=${encodeURIComponent(t)}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function g(t){const n=await fetch(`/api/caisse/commandes/${t}/articles`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function H(t={}){const n=new URLSearchParams;t.date_debut&&n.set("date_debut",t.date_debut),t.date_fin&&n.set("date_fin",t.date_fin);const e=await fetch(`/api/caisse/ventes-historique/stats/resume?${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function b(t,n){const e=await fetch(`/api/caisse/ventes-historique/${t}/envoyer-facture`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({email:String(n||"").trim()})});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function G(t){const n=await fetch(`/api/commandes/${t}/send-pdf`,{method:"GET",credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||"Erreur envoi email")}return n.json()}async function v(){const t=await fetch("/api/paniers",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function U(t){const n=await fetch(`/api/panier/${t}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function J(t,n){const e=await fetch(`/api/panier/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":n||""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur suppression")}return e.json()}async function q(){const t=await fetch("/api/users",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function D(t,n,e){const a=await fetch(`/api/panier/${t}/change-owner`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":e||""},credentials:"include",body:JSON.stringify({user_id:n})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur changement propriétaire")}return a.json()}async function L(t,n){const e=await fetch(`/panier/${t}/supprimer`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":n||""},credentials:"include",body:JSON.stringify({source:""})});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur suppression")}return e}async function z(){const t=await fetch("/api/catalogues",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function I(t,n=!1){const e=n?`/api/catalogues/${t}?nouveau=1`:`/api/catalogues/${t}`,a=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||`HTTP ${a.status}`)}return a.json()}async function x(t){const n=await fetch(`/api/catalogues/${t}/produits-commandes-recentes`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function B(t,n,e,a,s){const i={catalog_file_id:t,catalog_product_id:n,quantity:parseInt(e)||0,nouveau_panier:a===!0},r=await fetch("/panier/update-quantity",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":s||""},credentials:"include",body:JSON.stringify(i)});if(o(r),!r.ok){const c=await r.json().catch(()=>({}));throw new Error(c.error||"Erreur mise à jour quantité")}return r.json()}async function M(t,n,e,a){const i=await fetch("/panier/update-note",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":a||""},credentials:"include",body:JSON.stringify({catalog_file_id:t,catalog_product_id:n,note:e??""})});if(o(i),!i.ok){const r=await i.json().catch(()=>({}));throw new Error(r.error||"Erreur mise à jour note")}return i.json()}async function V(t,n,e){const a=await fetch(`/api/panier/${t}/note`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":e||""},credentials:"include",body:JSON.stringify({note:n??""})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur mise à jour note panier")}return a.json()}async function Q(t,n){const e=await fetch(`/panier/${t}/submit`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":n||""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur validation panier")}return e.json()}async function X(t,n){const e=await fetch(`/commandes/${t}/edit`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":n||""},credentials:"include",body:JSON.stringify({source:""})});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur réouverture")}return e}async function W(){const t=await fetch("/api/admin/trace",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Y(){const t=await fetch("/api/admin/stats",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Z(){const t=await fetch("/api/admin/stats/commandes",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function nn(){const t=await fetch("/api/admin/stats/utilisateurs",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function tn(){const t=await fetch("/api/admin/stats/catalogues",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function en(){const t=await fetch("/api/admin/stats/commandes-periode",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function on(){const t=await fetch("/api/admin/categories",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function an(t){const n=await fetch("/api/admin/categories/merge",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function sn(){const t=await fetch("/api/admin/suppliers",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function rn(t){const n=await fetch("/api/admin/suppliers/merge",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function cn(){const t=await fetch("/api/admin/roles",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function dn(t){const n=await fetch(`/api/admin/roles/${t}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function wn(){const t=await fetch("/api/admin/permissions",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function pn(t,n){const e=await fetch(`/api/admin/roles/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function un(t){const n=await fetch("/api/admin/roles",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function fn(t){const n=await fetch(`/api/admin/roles/${t}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function hn(t){const n=await fetch(`/api/admin/catalogues/${t}/synthese`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function ln(t){const n=await fetch(`/api/admin/catalogues/${t}/synthese-detaillee`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Tn(t){const n=t?`/api/admin/catalogues?scope=${encodeURIComponent(t)}`:"/api/admin/catalogues",e=await fetch(n,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function jn(t){const n=await fetch(`/api/admin/catalogues/${t}/alerte-recipients-count`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function En(){const t=await fetch("/api/admin/products",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function mn(t){const n=await fetch("/api/admin/products/bulk-update",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function yn(){const t=await fetch("/api/admin/users",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Cn(t){const n=await fetch(`/api/admin/users/${t}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Sn(t){const n=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function kn(t,n){const e=await fetch(`/api/admin/users/${t}/roles`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function On(t){const n=await fetch("/api/admin/users/bulk-assign-roles",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function _n(t,n){const e=await fetch(`/api/admin/users/${t}/toggle-active`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function Nn(t){const n=await fetch(`/api/admin/users/${t}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function An(){const t=await fetch("/api/admin/bandeaux",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Pn(){const t=await fetch("/api/admin/bandeaux/organizations",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function $n(t){const n=await fetch("/api/admin/bandeaux",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Rn(t,n){const e=await fetch(`/api/admin/bandeaux/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function Fn(t){const n=await fetch(`/api/admin/bandeaux/${t}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Kn(){const t=await fetch("/api/admin/organizations",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function gn(t){const n=await fetch(`/api/admin/organizations/${t}/stats`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Hn(t){const n=await fetch("/api/admin/organizations",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function bn(t,n){const e=await fetch(`/api/admin/organizations/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function Gn(t){const n=await fetch(`/api/admin/organizations/${t}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function vn(t=500){const n=await fetch(`/api/admin/email-queue?limit=${t}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Un(t){const n=await fetch(`/api/admin/user-roles/${t}/roles`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Jn(t){const n=await fetch(`/api/admin/user-roles/${t}/effective-permissions`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function qn(t,n){const e=await fetch(`/api/admin/user-roles/${t}/roles`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function Dn(t,n){const e=await fetch(`/api/admin/user-roles/${t}/roles/${n}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}export{vn as $,d as A,S as B,$ as C,b as D,g as E,K as F,R as G,C as H,y as I,m as J,k as K,N as L,A as M,P as N,O,_ as P,W as Q,Fn as R,$n as S,Rn as T,Pn as U,An as V,Gn as W,Hn as X,bn as Y,gn as Z,Kn as _,p as a,Dn as a0,qn as a1,cn as a2,Un as a3,Jn as a4,Z as a5,nn as a6,tn as a7,en as a8,Y as a9,an as aa,on as ab,fn as ac,un as ad,pn as ae,wn as af,dn as ag,rn as ah,sn as ai,Nn as aj,_n as ak,On as al,kn as am,Cn as an,Sn as ao,yn as ap,mn as aq,En as ar,jn as as,Tn as at,hn as au,ln as av,j as b,T as c,h as d,l as e,w as f,F as g,z as h,L as i,v as j,f as k,u as l,x as m,D as n,Q as o,M as p,B as q,X as r,G as s,I as t,V as u,J as v,q as w,U as x,H as y,E as z};
