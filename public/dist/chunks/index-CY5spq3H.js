const d=Symbol("AuthRequired");function a(e){if(e.status===401){const n=new Error("Session requise");throw n.code=d,n}}async function w(){const e=await fetch("/api/home",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function p(e="all"){const n=await fetch(`/api/admin/dashboard?scope=${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function u(e){const n=await fetch(`/api/commandes/${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({})),o=new Error(t.error||`HTTP ${n.status}`);throw n.status===404&&(o.notFound=!0),o}return n.json()}async function f(e,n){const t=await fetch(`/api/commandes/${e}/send-pdf-email`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","csrf-token":n||""},credentials:"include",body:JSON.stringify({})});a(t);const o=await t.json().catch(()=>({}));if(!t.ok)throw new Error(o.error||`HTTP ${t.status}`);return o}async function h(e,n,t){const o=await fetch(`/article/${e}/note`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","csrf-token":t||""},credentials:"include",body:JSON.stringify({note:n})});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||"Erreur sauvegarde note")}return o.json()}async function l(){const e=await fetch("/api/commandes",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function T(){const e=await fetch("/api/commandes/caisse",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function j(e,n,t){const o=await fetch(`/api/commandes/${e}/note`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":t||""},credentials:"include",body:JSON.stringify({note:n})});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||"Erreur sauvegarde note")}return o.json()}async function E(e){const n=await fetch(`/api/caisse/ventes-historique/${e}`,{method:"GET",credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function y(e){const n=typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:"",t=await fetch(`/api/caisse/ventes-historique/${e}/annuler`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","x-csrf-token":n},credentials:"include",body:JSON.stringify({_csrf:n})});a(t);const o=await t.json().catch(()=>({}));if(!t.ok)throw new Error(o.error||`HTTP ${t.status}`);return o}async function m(e={}){const n=new URLSearchParams;e.limit!=null&&n.set("limit",e.limit),e.offset!=null&&n.set("offset",e.offset),e.date_debut&&n.set("date_debut",e.date_debut),e.date_fin&&n.set("date_fin",e.date_fin),e.recherche&&n.set("recherche",e.recherche),e.caissier_id!=null&&n.set("caissier_id",e.caissier_id);const t=await fetch(`/api/caisse/ventes-historique?${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function S(){const e=await fetch("/api/caisse/produits",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function C(){const e=await fetch("/api/caisse/utilisateurs",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function O(){const e=await fetch("/api/caisse/modes-paiement",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function k(e){const n=await fetch("/api/caisse/ventes",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function _(e){const n=await fetch("/api/caisse/inventaires",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({comment:null})});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function R(e={}){const n=new URLSearchParams(e).toString(),t=await fetch(`/api/caisse/inventaires${n?`?${n}`:""}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function N(e){const n=await fetch(`/api/caisse/inventaires/${e}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw n.status===404?Object.assign(new Error(t.error||"Non trouvé"),{notFound:!0}):new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function P(e,n,t,o){const s={product_id:n,quantite_comptee:t};o!=null&&(s.comment=o);const i=await fetch(`/api/caisse/inventaires/${e}/lignes`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(s)});if(a(i),!i.ok){const r=await i.json().catch(()=>({}));throw new Error(r.error||`HTTP ${i.status}`)}return i.json()}async function $(e){const n=await fetch(`/api/caisse/inventaires/${e}/appliquer`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function A(e,n){const t=await fetch(`/api/caisse/inventaires/${e}/lignes/${n}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function F(e){const n=await fetch(`/api/caisse/inventaires/${e}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function K(e={}){const n=new URLSearchParams(e).toString(),t=await fetch(`/api/caisse/stock-mouvements${n?`?${n}`:""}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function g(e,n){const t=await fetch(`/api/caisse/products/${e}/code-ean`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({code_ean:n||null})});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function H(e){const n=await fetch("/api/caisse/paiements",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function b(e){const n=e?`?adherent_id=${encodeURIComponent(e)}`:"",t=await fetch(`/api/caisse/cotisation/check${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function G(e={}){const n=new URLSearchParams;e.date_debut&&n.set("date_debut",e.date_debut),e.date_fin&&n.set("date_fin",e.date_fin),e.limit&&n.set("limit",String(e.limit));const t=n.toString()?`?${n.toString()}`:"",o=await fetch(`/api/caisse/cotisation/mon-historique${t}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||`HTTP ${o.status}`)}return o.json()}async function v(e){const n=await fetch(`/api/caisse/commandes-utilisateur?user_id=${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function U(e){const n=await fetch(`/api/caisse/commandes/${e}/articles`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function J(e={}){const n=new URLSearchParams;e.date_debut&&n.set("date_debut",e.date_debut),e.date_fin&&n.set("date_fin",e.date_fin);const t=await fetch(`/api/caisse/ventes-historique/stats/resume?${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function q(e,n){const t=await fetch(`/api/caisse/ventes-historique/${e}/envoyer-facture`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({email:String(n||"").trim()})});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function D(e){const n=await fetch(`/api/commandes/${e}/send-pdf`,{method:"GET",credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||"Erreur envoi email")}return n.json()}async function L(){const e=await fetch("/api/paniers",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function z(e){const n=await fetch(`/api/panier/${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function I(e,n){const t=await fetch(`/api/panier/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":n||""},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||"Erreur suppression")}return t.json()}async function x(){const e=await fetch("/api/users",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function B(e,n,t){const o=await fetch(`/api/panier/${e}/change-owner`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":t||""},credentials:"include",body:JSON.stringify({user_id:n})});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||"Erreur changement propriétaire")}return o.json()}async function M(e,n){const t=await fetch(`/panier/${e}/supprimer`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":n||""},credentials:"include",body:JSON.stringify({source:""})});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||"Erreur suppression")}return t}async function V(){const e=await fetch("/api/catalogues",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function Q(e,n=!1){const t=n?`/api/catalogues/${e}?nouveau=1`:`/api/catalogues/${e}`,o=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||`HTTP ${o.status}`)}return o.json()}async function X(e){const n=await fetch(`/api/catalogues/${e}/produits-commandes-recentes`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function W(e,n,t,o,s){const i={catalog_file_id:e,catalog_product_id:n,quantity:parseInt(t)||0,nouveau_panier:o===!0},r=await fetch("/panier/update-quantity",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":s||""},credentials:"include",body:JSON.stringify(i)});if(a(r),!r.ok){const c=await r.json().catch(()=>({}));throw new Error(c.error||"Erreur mise à jour quantité")}return r.json()}async function Y(e,n,t,o){const i=await fetch("/panier/update-note",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":o||""},credentials:"include",body:JSON.stringify({catalog_file_id:e,catalog_product_id:n,note:t??""})});if(a(i),!i.ok){const r=await i.json().catch(()=>({}));throw new Error(r.error||"Erreur mise à jour note")}return i.json()}async function Z(e,n,t){const o=await fetch(`/api/panier/${e}/note`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":t||""},credentials:"include",body:JSON.stringify({note:n??""})});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||"Erreur mise à jour note panier")}return o.json()}async function nn(e,n){const t=await fetch(`/panier/${e}/submit`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":n||""},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||"Erreur validation panier")}return t.json()}async function en(e,n){const t=await fetch(`/commandes/${e}/edit`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":n||""},credentials:"include",body:JSON.stringify({source:""})});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||"Erreur réouverture")}return t}async function tn(){const e=await fetch("/api/admin/trace",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function on(){const e=await fetch("/api/admin/stats",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function an(){const e=await fetch("/api/admin/stats/commandes",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function sn(){const e=await fetch("/api/admin/stats/utilisateurs",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function rn(){const e=await fetch("/api/admin/stats/catalogues",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function cn(){const e=await fetch("/api/admin/stats/commandes-periode",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function dn(){const e=await fetch("/api/admin/categories",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function wn(e){const n=await fetch("/api/admin/categories/merge",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function pn(){const e=await fetch("/api/admin/suppliers",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function un(e){const n=await fetch("/api/admin/suppliers/merge",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function fn(){const e=await fetch("/api/admin/roles",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function hn(e){const n=await fetch(`/api/admin/roles/${e}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function ln(){const e=await fetch("/api/admin/permissions",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function Tn(e,n){const t=await fetch(`/api/admin/roles/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function jn(e){const n=await fetch("/api/admin/roles",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function En(e){const n=await fetch(`/api/admin/roles/${e}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function yn(e){const n=await fetch(`/api/admin/catalogues/${e}/synthese`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function mn(e){const n=await fetch(`/api/admin/catalogues/${e}/synthese-detaillee`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Sn(e){const n=e?`/api/admin/catalogues?scope=${encodeURIComponent(e)}`:"/api/admin/catalogues",t=await fetch(n,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function Cn(e){const n=await fetch(`/api/admin/catalogues/${e}/alerte-recipients-count`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function On(){const e=await fetch("/api/admin/products",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function kn(e){const n=await fetch("/api/admin/products/bulk-update",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function _n(e={}){const n=new URLSearchParams(e).toString(),t=await fetch(`/api/admin/receptions${n?`?${n}`:""}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function Rn(e,n=""){const t=new URLSearchParams({supplier_id:e});n&&t.set("search",n);const o=await fetch(`/api/admin/receptions/products?${t.toString()}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||`HTTP ${o.status}`)}return o.json()}async function Nn(e){const n=await fetch(`/api/admin/receptions/preorders-catalogues?supplier_id=${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Pn(e){const n=await fetch(`/api/admin/receptions/preorders-delivered?supplier_id=${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function $n(e,n=null){const t=new URLSearchParams({supplier_id:e});n!=null&&n!==""&&t.set("catalog_file_id",n);const o=await fetch(`/api/admin/receptions/preorder-lines?${t.toString()}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(o),!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||`HTTP ${o.status}`)}return o.json()}async function An(e){const n=await fetch(`/api/admin/receptions/${e}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Fn(e){const n=await fetch("/api/admin/receptions",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Kn(e,n){const t=await fetch(`/api/admin/receptions/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function gn(e){const n=await fetch(`/api/admin/receptions/${e}/validate`,{method:"POST",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Hn(e){const n=await fetch(`/api/admin/receptions/${e}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function bn(){const e=await fetch("/api/admin/users",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function Gn(e){const n=await fetch(`/api/admin/users/${e}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function vn(e){const n=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Un(e,n){const t=await fetch(`/api/admin/users/${e}/roles`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function Jn(e){const n=await fetch("/api/admin/users/bulk-assign-roles",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function qn(e,n){const t=await fetch(`/api/admin/users/${e}/toggle-active`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function Dn(e){const n=await fetch(`/api/admin/users/${e}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Ln(){const e=await fetch("/api/admin/bandeaux",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function zn(){const e=await fetch("/api/admin/bandeaux/organizations",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function In(e){const n=await fetch("/api/admin/bandeaux",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function xn(e,n){const t=await fetch(`/api/admin/bandeaux/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function Bn(e){const n=await fetch(`/api/admin/bandeaux/${e}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Mn(){const e=await fetch("/api/admin/organizations",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function Vn(e){const n=await fetch(`/api/admin/organizations/${e}/stats`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Qn(e){const n=await fetch("/api/admin/organizations",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Xn(e,n){const t=await fetch(`/api/admin/organizations/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function Wn(e){const n=await fetch(`/api/admin/organizations/${e}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Yn(e=500){const n=await fetch(`/api/admin/email-queue?limit=${e}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function Zn(){const e=await fetch("/api/admin/email-queue/settings",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(e),!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||`HTTP ${e.status}`)}return e.json()}async function ne(e){const n=await fetch("/api/admin/email-queue/settings",{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(e)});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function ee(e){const n=await fetch(`/api/admin/user-roles/${e}/roles`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function te(e){const n=await fetch(`/api/admin/user-roles/${e}/effective-permissions`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(n),!n.ok){const t=await n.json().catch(()=>({}));throw new Error(t.error||`HTTP ${n.status}`)}return n.json()}async function oe(e,n){const t=await fetch(`/api/admin/user-roles/${e}/roles`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}async function ae(e,n){const t=await fetch(`/api/admin/user-roles/${e}/roles/${n}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(a(t),!t.ok){const o=await t.json().catch(()=>({}));throw new Error(o.error||`HTTP ${t.status}`)}return t.json()}export{$n as $,d as A,J as B,m as C,k as D,H as E,q as F,U as G,v as H,b as I,O as J,C as K,S as L,R as M,g as N,_ as O,P,$ as Q,N as R,A as S,F as T,K as U,Pn as V,Nn as W,_n as X,An as Y,gn as Z,Hn as _,p as a,Fn as a0,Kn as a1,pn as a2,Rn as a3,tn as a4,Bn as a5,In as a6,xn as a7,zn as a8,Ln as a9,Dn as aA,qn as aB,Jn as aC,Un as aD,Gn as aE,vn as aF,bn as aG,kn as aH,On as aI,Cn as aJ,Sn as aK,yn as aL,mn as aM,Wn as aa,Qn as ab,Xn as ac,Vn as ad,Mn as ae,ne as af,Zn as ag,Yn as ah,ae as ai,oe as aj,fn as ak,ee as al,te as am,an,sn as ao,rn as ap,cn as aq,on as ar,wn as as,dn as at,En as au,jn as av,Tn as aw,ln as ax,hn as ay,un as az,E as b,j as c,l as d,T as e,w as f,G as g,V as h,M as i,L as j,f as k,h as l,u as m,X as n,B as o,nn as p,Y as q,en as r,D as s,W as t,Z as u,Q as v,I as w,x,z as y,y as z};
