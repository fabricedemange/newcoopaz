const d=Symbol("AuthRequired");function o(t){if(t.status===401){const n=new Error("Session requise");throw n.code=d,n}}async function w(){const t=await fetch("/api/home",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function p(t="all"){const n=await fetch(`/api/admin/dashboard?scope=${encodeURIComponent(t)}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function u(t){const n=await fetch(`/api/commandes/${t}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({})),a=new Error(e.error||`HTTP ${n.status}`);throw n.status===404&&(a.notFound=!0),a}return n.json()}async function f(t,n,e){const a=await fetch(`/article/${t}/note`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","csrf-token":e||""},credentials:"include",body:JSON.stringify({note:n})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur sauvegarde note")}return a.json()}async function h(){const t=await fetch("/api/commandes",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function l(){const t=await fetch("/api/commandes/caisse",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function T(t,n,e){const a=await fetch(`/api/commandes/${t}/note`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":e||""},credentials:"include",body:JSON.stringify({note:n})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur sauvegarde note")}return a.json()}async function j(t){const n=await fetch(`/api/caisse/ventes-historique/${t}`,{method:"GET",credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function E(t){const n=typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:"",e=await fetch(`/api/caisse/ventes-historique/${t}/annuler`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","x-csrf-token":n},credentials:"include",body:JSON.stringify({_csrf:n})});o(e);const a=await e.json().catch(()=>({}));if(!e.ok)throw new Error(a.error||`HTTP ${e.status}`);return a}async function y(t={}){const n=new URLSearchParams;t.limit!=null&&n.set("limit",t.limit),t.offset!=null&&n.set("offset",t.offset),t.date_debut&&n.set("date_debut",t.date_debut),t.date_fin&&n.set("date_fin",t.date_fin),t.recherche&&n.set("recherche",t.recherche),t.caissier_id!=null&&n.set("caissier_id",t.caissier_id);const e=await fetch(`/api/caisse/ventes-historique?${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function m(){const t=await fetch("/api/caisse/produits",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function C(){const t=await fetch("/api/caisse/utilisateurs",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function S(){const t=await fetch("/api/caisse/modes-paiement",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function O(t){const n=await fetch("/api/caisse/ventes",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function k(t){const n=await fetch("/api/caisse/inventaires",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({comment:null})});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function _(t={}){const n=new URLSearchParams(t).toString(),e=await fetch(`/api/caisse/inventaires${n?`?${n}`:""}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function N(t){const n=await fetch(`/api/caisse/inventaires/${t}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw n.status===404?Object.assign(new Error(e.error||"Non trouvé"),{notFound:!0}):new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function P(t,n,e,a){const s={product_id:n,quantite_comptee:e};a!=null&&(s.comment=a);const i=await fetch(`/api/caisse/inventaires/${t}/lignes`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(s)});if(o(i),!i.ok){const r=await i.json().catch(()=>({}));throw new Error(r.error||`HTTP ${i.status}`)}return i.json()}async function A(t){const n=await fetch(`/api/caisse/inventaires/${t}/appliquer`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function $(t={}){const n=new URLSearchParams(t).toString(),e=await fetch(`/api/caisse/stock-mouvements${n?`?${n}`:""}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function R(t,n){const e=await fetch(`/api/caisse/products/${t}/code-ean`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({code_ean:n||null})});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function F(t){const n=await fetch("/api/caisse/paiements",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function K(t){const n=t?`?adherent_id=${encodeURIComponent(t)}`:"",e=await fetch(`/api/caisse/cotisation/check${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function g(t={}){const n=new URLSearchParams;t.date_debut&&n.set("date_debut",t.date_debut),t.date_fin&&n.set("date_fin",t.date_fin),t.limit&&n.set("limit",String(t.limit));const e=n.toString()?`?${n.toString()}`:"",a=await fetch(`/api/caisse/cotisation/mon-historique${e}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||`HTTP ${a.status}`)}return a.json()}async function H(t){const n=await fetch(`/api/caisse/commandes-utilisateur?user_id=${encodeURIComponent(t)}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function b(t){const n=await fetch(`/api/caisse/commandes/${t}/articles`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function G(t={}){const n=new URLSearchParams;t.date_debut&&n.set("date_debut",t.date_debut),t.date_fin&&n.set("date_fin",t.date_fin);const e=await fetch(`/api/caisse/ventes-historique/stats/resume?${n}`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function v(t,n){const e=await fetch(`/api/caisse/ventes-historique/${t}/envoyer-facture`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify({email:String(n||"").trim()})});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function J(t){const n=await fetch(`/api/commandes/${t}/send-pdf`,{method:"GET",credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||"Erreur envoi email")}return n.json()}async function U(){const t=await fetch("/api/paniers",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function q(t){const n=await fetch(`/api/panier/${t}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function D(t,n){const e=await fetch(`/api/panier/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":n||""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur suppression")}return e.json()}async function z(){const t=await fetch("/api/users",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function L(t,n,e){const a=await fetch(`/api/panier/${t}/change-owner`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":e||""},credentials:"include",body:JSON.stringify({user_id:n})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur changement propriétaire")}return a.json()}async function x(t,n){const e=await fetch(`/panier/${t}/supprimer`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":n||""},credentials:"include",body:JSON.stringify({source:""})});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur suppression")}return e}async function I(){const t=await fetch("/api/catalogues",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function B(t,n=!1){const e=n?`/api/catalogues/${t}?nouveau=1`:`/api/catalogues/${t}`,a=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||`HTTP ${a.status}`)}return a.json()}async function M(t){const n=await fetch(`/api/catalogues/${t}/produits-commandes-recentes`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function V(t,n,e,a,s){const i={catalog_file_id:t,catalog_product_id:n,quantity:parseInt(e)||0,nouveau_panier:a===!0},r=await fetch("/panier/update-quantity",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":s||""},credentials:"include",body:JSON.stringify(i)});if(o(r),!r.ok){const c=await r.json().catch(()=>({}));throw new Error(c.error||"Erreur mise à jour quantité")}return r.json()}async function Q(t,n,e,a){const i=await fetch("/panier/update-note",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":a||""},credentials:"include",body:JSON.stringify({catalog_file_id:t,catalog_product_id:n,note:e??""})});if(o(i),!i.ok){const r=await i.json().catch(()=>({}));throw new Error(r.error||"Erreur mise à jour note")}return i.json()}async function X(t,n,e){const a=await fetch(`/api/panier/${t}/note`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":e||""},credentials:"include",body:JSON.stringify({note:n??""})});if(o(a),!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Erreur mise à jour note panier")}return a.json()}async function W(t,n){const e=await fetch(`/panier/${t}/submit`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":n||""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur validation panier")}return e.json()}async function Y(t,n){const e=await fetch(`/commandes/${t}/edit`,{method:"POST",headers:{"Content-Type":"application/json","csrf-token":n||""},credentials:"include",body:JSON.stringify({source:""})});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||"Erreur réouverture")}return e}async function Z(){const t=await fetch("/api/admin/trace",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function nn(){const t=await fetch("/api/admin/stats",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function tn(){const t=await fetch("/api/admin/stats/commandes",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function en(){const t=await fetch("/api/admin/stats/utilisateurs",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function on(){const t=await fetch("/api/admin/stats/catalogues",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function an(){const t=await fetch("/api/admin/stats/commandes-periode",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function sn(){const t=await fetch("/api/admin/categories",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function rn(t){const n=await fetch("/api/admin/categories/merge",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function cn(){const t=await fetch("/api/admin/suppliers",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function dn(t){const n=await fetch("/api/admin/suppliers/merge",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function wn(){const t=await fetch("/api/admin/roles",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function pn(t){const n=await fetch(`/api/admin/roles/${t}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function un(){const t=await fetch("/api/admin/permissions",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function fn(t,n){const e=await fetch(`/api/admin/roles/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function hn(t){const n=await fetch("/api/admin/roles",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function ln(t){const n=await fetch(`/api/admin/roles/${t}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Tn(t){const n=await fetch(`/api/admin/catalogues/${t}/synthese`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function jn(t){const n=await fetch(`/api/admin/catalogues/${t}/synthese-detaillee`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function En(t){const n=t?`/api/admin/catalogues?scope=${encodeURIComponent(t)}`:"/api/admin/catalogues",e=await fetch(n,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function yn(t){const n=await fetch(`/api/admin/catalogues/${t}/alerte-recipients-count`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function mn(){const t=await fetch("/api/admin/products",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Cn(t){const n=await fetch("/api/admin/products/bulk-update",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Sn(){const t=await fetch("/api/admin/users",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function On(t){const n=await fetch(`/api/admin/users/${t}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function kn(t){const n=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function _n(t,n){const e=await fetch(`/api/admin/users/${t}/roles`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function Nn(t){const n=await fetch("/api/admin/users/bulk-assign-roles",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Pn(t,n){const e=await fetch(`/api/admin/users/${t}/toggle-active`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function An(t){const n=await fetch(`/api/admin/users/${t}`,{method:"DELETE",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function $n(){const t=await fetch("/api/admin/bandeaux",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Rn(){const t=await fetch("/api/admin/bandeaux/organizations",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Fn(t){const n=await fetch("/api/admin/bandeaux",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Kn(t,n){const e=await fetch(`/api/admin/bandeaux/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function gn(t){const n=await fetch(`/api/admin/bandeaux/${t}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Hn(){const t=await fetch("/api/admin/organizations",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function bn(t){const n=await fetch(`/api/admin/organizations/${t}/stats`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Gn(t){const n=await fetch("/api/admin/organizations",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function vn(t,n){const e=await fetch(`/api/admin/organizations/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function Jn(t){const n=await fetch(`/api/admin/organizations/${t}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Un(t=500){const n=await fetch(`/api/admin/email-queue?limit=${t}`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function qn(){const t=await fetch("/api/admin/email-queue/settings",{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(t),!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.error||`HTTP ${t.status}`)}return t.json()}async function Dn(t){const n=await fetch("/api/admin/email-queue/settings",{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(t)});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function zn(t){const n=await fetch(`/api/admin/user-roles/${t}/roles`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function Ln(t){const n=await fetch(`/api/admin/user-roles/${t}/effective-permissions`,{method:"GET",headers:{Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(n),!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`HTTP ${n.status}`)}return n.json()}async function xn(t,n){const e=await fetch(`/api/admin/user-roles/${t}/roles`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include",body:JSON.stringify(n)});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}async function In(t,n){const e=await fetch(`/api/admin/user-roles/${t}/roles/${n}`,{method:"DELETE",headers:{"csrf-token":typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:""},credentials:"include"});if(o(e),!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.error||`HTTP ${e.status}`)}return e.json()}export{bn as $,d as A,y as B,O as C,F as D,v as E,b as F,H as G,K as H,S as I,C as J,m as K,k as L,P as M,A as N,R as O,$ as P,_ as Q,N as R,Z as S,gn as T,Fn as U,Kn as V,Rn as W,$n as X,Jn as Y,Gn as Z,vn as _,p as a,Hn as a0,Dn as a1,qn as a2,Un as a3,In as a4,xn as a5,wn as a6,zn as a7,Ln as a8,tn as a9,en as aa,on as ab,an as ac,nn as ad,rn as ae,sn as af,ln as ag,hn as ah,fn as ai,un as aj,pn as ak,dn as al,cn as am,An as an,Pn as ao,Nn as ap,_n as aq,On as ar,kn as as,Sn as at,Cn as au,mn as av,yn as aw,En as ax,Tn as ay,jn as az,j as b,T as c,h as d,l as e,w as f,g,I as h,x as i,U as j,f as k,u as l,M as m,L as n,W as o,Q as p,V as q,Y as r,J as s,B as t,X as u,D as v,z as w,q as x,E as y,G as z};
