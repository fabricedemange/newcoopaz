import{c as n,a as s,b as p,t as w,d as m,w as y,e as v,v as f,f as h,r as l,g as _,o as c,h as g}from"./chunks/runtime-dom.esm-bundler-CuNObg1-.js";const x={class:"container-fluid px-3 mt-4"},V={class:"row justify-content-center"},S={class:"col-12 col-sm-8 col-md-6 col-lg-4"},k={class:"card"},T={class:"card-body"},z={key:0,class:"alert alert-danger",role:"alert"},M=["value"],N={class:"mb-3"},j={class:"mb-3"},q={class:"d-grid gap-2"},C=["disabled"],E={key:0,class:"spinner-border spinner-border-sm me-1"},P={__name:"LoginPage",setup(B){const i=l(""),r=l(""),o=l(""),a=l(!1),u=_(()=>window.CSRF_TOKEN||"");async function b(){o.value="",a.value=!0;try{const d=new URLSearchParams({email:i.value,password:r.value,_csrf:u.value}),t=await(await fetch("/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:d.toString(),credentials:"include"})).json().catch(()=>({}));if(t.success&&t.redirect){window.location.href=t.redirect;return}o.value=t.error||"Identifiants incorrects. Veuillez réessayer."}catch{o.value="Erreur de connexion. Veuillez réessayer."}finally{a.value=!1}}return(d,e)=>(c(),n("div",x,[s("div",V,[s("div",S,[s("div",k,[e[6]||(e[6]=s("div",{class:"card-header text-center"},[s("h2",{class:"card-title mb-0"},"Connexion")],-1)),s("div",T,[o.value?(c(),n("div",z,[e[2]||(e[2]=s("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),p(" "+w(o.value),1)])):m("",!0),s("form",{onSubmit:y(b,["prevent"])},[s("input",{type:"hidden",name:"_csrf",value:u.value},null,8,M),s("div",N,[e[3]||(e[3]=s("label",{for:"email",class:"form-label"},"Email de l'utilisateur",-1)),v(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),type:"text",class:"form-control",required:"",autofocus:"",placeholder:"Votre email"},null,512),[[f,i.value]])]),s("div",j,[e[4]||(e[4]=s("label",{for:"password",class:"form-label"},"Mot de passe",-1)),v(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t),type:"password",class:"form-control",required:"",placeholder:"Votre mot de passe"},null,512),[[f,r.value]])]),s("div",q,[s("button",{type:"submit",class:"btn btn-primary",disabled:a.value},[a.value?(c(),n("span",E)):m("",!0),e[5]||(e[5]=p(" Se connecter ",-1))],8,C)])],32)]),e[7]||(e[7]=s("div",{class:"card-footer text-center"},[s("a",{href:"/forgot-password",class:"btn btn-link"},"Mot de passe oublié ?")],-1))])])]),e[8]||(e[8]=h('<div class="row justify-content-center mt-4"><div class="col-12 col-sm-8 col-md-6 col-lg-4"><div class="card"><div class="card-header"><h5 class="card-title mb-0">Aide</h5></div><div class="card-body"><h6>Problème de connexion ?</h6><p class="text-muted"> Vérifiez votre nom d&#39;utilisateur et mot de passe. Si vous avez oublié votre mot de passe, utilisez le lien &quot;Mot de passe oublié ?&quot;. </p></div></div></div></div>',1))]))}},A=g(P);A.mount("#auth-login-app");
