import{i as x,o as u,c as m,u as i,a as e,t as a,b as c,e as g,v as k,d as w,n as p,F as y,k as f,w as b,j as U,B as R,C as M,p as S,D as A,h as $}from"./chunks/runtime-dom.esm-bundler-CPobOing.js";import{d as L,c as E}from"./chunks/pinia-8wUEIqj_.js";import{aj as I,ak as B,al as Q,am as V,an as D,ao as T,a2 as z,ap as N}from"./chunks/index-zlPV8JO4.js";import{_ as j}from"./chunks/_plugin-vue_export-helper-DlAUqK2U.js";const P=L("adminUsers",{state:()=>({users:[],roles:[],loading:!0,error:null,editingUser:null,selectedUserRoles:[],showRoleModal:!1,showBulkModal:!1,showCreateModal:!1,selectedUsers:[],bulkRoleIds:[],searchQuery:"",sortColumn:"username",sortDirection:"asc",newUser:{username:"",email:"",password:"",role_ids:[]}}),getters:{filteredUsers(o){if(!o.searchQuery)return o.users;const t=o.searchQuery.toLowerCase();return o.users.filter(r=>r.username&&r.username.toLowerCase().includes(t)||r.email&&r.email.toLowerCase().includes(t)||r.role_names&&r.role_names.toLowerCase().includes(t))},sortedUsers(o){const r=[...o.searchQuery?o.users.filter(h=>h.username&&h.username.toLowerCase().includes(o.searchQuery.toLowerCase())||h.email&&h.email.toLowerCase().includes(o.searchQuery.toLowerCase())||h.role_names&&h.role_names.toLowerCase().includes(o.searchQuery.toLowerCase())):o.users],d=o.sortColumn||"username",s=o.sortDirection||"asc";return r.sort((h,l)=>{let n=h[d],v=l[d];if(d==="is_active")return n=n?1:0,v=v?1:0,s==="asc"?n-v:v-n;if(d==="id")return n=Number(n)||0,v=Number(v)||0,s==="asc"?n-v:v-n;n=(n??"").toString().toLowerCase(),v=(v??"").toString().toLowerCase();const C=n.localeCompare(v,"fr");return s==="asc"?C:-C}),r},allSelected(o){const t=o.searchQuery?o.users.filter(r=>r.username&&r.username.toLowerCase().includes(o.searchQuery.toLowerCase())||r.email&&r.email.toLowerCase().includes(o.searchQuery.toLowerCase())||r.role_names&&r.role_names.toLowerCase().includes(o.searchQuery.toLowerCase())):o.users;return t.length>0&&t.every(r=>o.selectedUsers.includes(r.id))},someSelected(o){if(o.selectedUsers.length===0)return!1;const t=o.searchQuery?o.users.filter(d=>d.username&&d.username.toLowerCase().includes(o.searchQuery.toLowerCase())||d.email&&d.email.toLowerCase().includes(o.searchQuery.toLowerCase())||d.role_names&&d.role_names.toLowerCase().includes(o.searchQuery.toLowerCase())):o.users;return!(t.length>0&&t.every(d=>o.selectedUsers.includes(d.id)))}},actions:{async loadUsers(){try{const o=await N();o.success?this.users=o.users||[]:this.error=o.error||"Erreur lors du chargement des utilisateurs"}catch(o){console.error("Error loading users:",o),this.error=o.message||"Erreur de connexion au serveur"}},async loadRoles(){try{const o=await z();o.success?this.roles=o.roles||[]:this.error=o.error||"Erreur lors du chargement des rôles"}catch(o){console.error("Error loading roles:",o),this.error=o.message||"Erreur de connexion au serveur"}},openCreateModal(){this.newUser={username:"",email:"",password:"",role_ids:[]},this.showCreateModal=!0},closeCreateModal(){this.showCreateModal=!1,this.newUser={username:"",email:"",password:"",role_ids:[]}},async createUser(){if(!this.newUser.username||!this.newUser.email||!this.newUser.password){alert("Veuillez remplir tous les champs obligatoires");return}try{await T(this.newUser),alert("Utilisateur créé avec succès"),this.closeCreateModal(),await this.loadUsers()}catch(o){alert(o.message||"Erreur lors de la création")}},async openRoleModal(o){try{const t=await D(o.id);t.success?(this.editingUser={...t.user},this.selectedUserRoles=t.role_ids||[],this.showRoleModal=!0):alert("Erreur: "+t.error)}catch(t){alert(t.message||"Erreur de chargement")}},async saveUserRoles(){if(this.editingUser)try{await V(this.editingUser.id,{role_ids:this.selectedUserRoles}),this.showRoleModal=!1,this.editingUser=null,this.selectedUserRoles=[],await this.loadUsers(),alert("Rôles mis à jour avec succès")}catch(o){alert(o.message||"Erreur lors de la sauvegarde")}},closeRoleModal(){this.showRoleModal=!1,this.editingUser=null,this.selectedUserRoles=[]},toggleSelectAll(){this.allSelected?this.selectedUsers=[]:this.selectedUsers=this.sortedUsers.map(o=>o.id)},setSort(o){this.sortColumn===o?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=o,this.sortDirection="asc")},toggleUserSelection(o){this.selectedUsers.indexOf(o)>-1?this.selectedUsers=this.selectedUsers.filter(r=>r!==o):this.selectedUsers=[...this.selectedUsers,o]},isUserSelected(o){return this.selectedUsers.includes(o)},openBulkAssignModal(){if(this.selectedUsers.length===0){alert("Veuillez sélectionner au moins un utilisateur");return}this.bulkRoleIds=[],this.showBulkModal=!0},closeBulkModal(){this.showBulkModal=!1,this.bulkRoleIds=[]},async bulkAssignRoles(){if(this.bulkRoleIds.length===0){alert("Veuillez sélectionner au moins un rôle");return}try{const o=await Q({user_ids:this.selectedUsers,role_ids:this.bulkRoleIds});this.showBulkModal=!1,this.selectedUsers=[],this.bulkRoleIds=[],await this.loadUsers(),alert(o.message||"Rôles assignés avec succès")}catch(o){alert(o.message||"Erreur lors de l'assignation")}},getRoleBadgeClass(o){return o.role_count===0?"bg-warning":"bg-success"},getSelectedUsersText(){return`${this.selectedUsers.length} utilisateur(s) sélectionné(s)`},async toggleUserActive(o){const t=!o.is_active,r=t?`Activer l'utilisateur "${o.username}" ?

Il pourra se connecter à nouveau.`:`Désactiver l'utilisateur "${o.username}" ?

Il ne pourra plus se connecter.`;if(confirm(r))try{await B(o.id,{is_active:t}),await this.loadUsers(),alert(`Utilisateur ${t?"activé":"désactivé"} avec succès`)}catch(d){alert(d.message||"Erreur lors de la modification")}},impersonateUser(o){if(!confirm(`Voulez-vous vous connecter en tant que "${o.username}" ?`))return;const t=document.createElement("form");t.method="POST",t.action="/admin/impersonate";const r=document.createElement("input");r.type="hidden",r.name="_csrf",r.value=typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:"",t.appendChild(r);const d=document.createElement("input");d.type="hidden",d.name="user_id",d.value=o.id,t.appendChild(d),document.body.appendChild(t),t.submit()},editUser(o){window.location.href=`/admin/users/${o.id}/edit`},async deleteUser(o){if(confirm(`⚠️ ATTENTION : Êtes-vous sûr de vouloir SUPPRIMER l'utilisateur "${o.username}" ?

Cette action est IRRÉVERSIBLE.`))try{await I(o.id),await this.loadUsers(),alert("Utilisateur supprimé avec succès")}catch(t){alert(t.message||"Erreur lors de la suppression")}},async loadData(){this.loading=!0,this.error=null;try{await Promise.all([this.loadUsers(),this.loadRoles()])}catch(o){this.error=o.message||"Erreur d'initialisation"}finally{this.loading=!1}}}}),q={key:0,class:"text-center py-5"},O={key:1,class:"alert alert-danger"},F={key:2},G={class:"d-flex justify-content-between align-items-center mb-4"},K={class:"row mb-4"},H={class:"col-md-8"},J={class:"col-md-4"},W=["disabled"],X={key:0,class:"alert alert-info d-flex justify-content-between align-items-center"},Y={class:"d-none d-md-block"},Z={class:"card"},ee={class:"card-body"},se={class:"table table-hover"},te={class:"thead-admin-site"},le={style:{width:"40px"}},oe=["checked","indeterminate"],ie=["checked","onChange"],re={class:"text-muted"},ne={class:"dropdown"},ae=["id"],de=["aria-labelledby"],ce=["onClick"],ue=["onClick"],me=["onClick"],pe=["onClick"],be=["onClick"],he={key:0,class:"text-center text-muted py-4"},ve={class:"d-md-none"},ge={class:"card-body"},we={class:"form-check mb-3"},ye=["id","checked","onChange"],fe=["for"],ke={class:"card-text mb-2"},Ue={class:"text-muted"},Ce={class:"card-text mb-2"},_e={class:"card-text mb-3"},xe={class:"dropdown w-100"},Re=["id"],Me=["aria-labelledby"],Se=["onClick"],Ae=["onClick"],$e=["onClick"],Le=["onClick"],Ee=["onClick"],Ie={key:1,class:"modal show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Be={class:"modal-dialog modal-lg"},Qe={class:"modal-content"},Ve={class:"modal-header"},De={class:"modal-title"},Te={class:"modal-body"},ze=["id","value"],Ne=["for"],je={class:"text-muted"},Pe={class:"text-muted"},qe={key:0,class:"text-center text-muted py-4"},Oe={class:"modal-footer"},Fe={key:2,class:"modal show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Ge={class:"modal-dialog modal-lg"},Ke={class:"modal-content"},He={class:"modal-header"},Je={class:"modal-title"},We={class:"modal-body"},Xe=["id","value"],Ye=["for"],Ze={class:"text-muted"},es={class:"modal-footer"},ss=["aria-hidden"],ts={class:"modal-content"},ls={class:"modal-header"},os={class:"modal-body"},is={class:"mb-3"},rs={class:"mb-3"},ns={class:"mb-3"},as={class:"mb-3"},ds=["id","value"],cs=["for"],us={class:"text-muted d-block"},ms={class:"modal-footer"},ps={__name:"AdminUsersPage",setup(o){const t=P();function r(d){return t.sortColumn!==d?"bi-arrow-down-up text-secondary opacity-50":t.sortDirection==="asc"?"bi-arrow-up":"bi-arrow-down"}return x(()=>{if(t.loadData(),new URLSearchParams(window.location.search).get("modal")==="new"){t.openCreateModal();const s=new URL(window.location.href);s.searchParams.delete("modal"),window.history.replaceState({},"",s.toString())}}),(d,s)=>{var h;return u(),m("div",null,[i(t).loading?(u(),m("div",q,[...s[28]||(s[28]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")],-1),e("p",{class:"mt-3 text-muted"},"Chargement des utilisateurs...",-1)])])):i(t).error?(u(),m("div",O,a(i(t).error),1)):(u(),m("div",F,[e("div",G,[s[30]||(s[30]=e("h2",null,"Gestion des Utilisateurs",-1)),e("button",{type:"button",class:"btn btn-success",onClick:s[0]||(s[0]=l=>i(t).openCreateModal())},[...s[29]||(s[29]=[e("i",{class:"bi bi-person-plus-fill"},null,-1),c(" Ajouter un utilisateur ",-1)])])]),e("div",K,[e("div",H,[g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>i(t).searchQuery=l),type:"text",class:"form-control",placeholder:"Rechercher un utilisateur..."},null,512),[[k,i(t).searchQuery]])]),e("div",J,[e("button",{type:"button",class:"btn btn-primary w-100",disabled:i(t).selectedUsers.length===0,onClick:s[2]||(s[2]=l=>i(t).openBulkAssignModal())},[...s[31]||(s[31]=[e("i",{class:"bi bi-people-fill"},null,-1),c(" Affectation en masse ",-1)])],8,W)])]),i(t).selectedUsers.length>0?(u(),m("div",X,[e("span",null,a(i(t).getSelectedUsersText()),1),e("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:s[3]||(s[3]=l=>i(t).selectedUsers=[])}," Désélectionner tout ")])):w("",!0),e("div",Y,[e("div",Z,[e("div",ee,[e("table",se,[e("thead",te,[e("tr",null,[e("th",le,[e("input",{type:"checkbox",class:"form-check-input",checked:i(t).allSelected,indeterminate:i(t).someSelected,onChange:s[4]||(s[4]=l=>i(t).toggleSelectAll())},null,40,oe)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[5]||(s[5]=l=>i(t).setSort("username"))},[s[32]||(s[32]=c("Utilisateur ",-1)),e("i",{class:p("bi ms-1 "+r("username"))},null,2)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[6]||(s[6]=l=>i(t).setSort("email"))},[s[33]||(s[33]=c("Email ",-1)),e("i",{class:p("bi ms-1 "+r("email"))},null,2)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[7]||(s[7]=l=>i(t).setSort("organization_name"))},[s[34]||(s[34]=c("Organisation ",-1)),e("i",{class:p("bi ms-1 "+r("organization_name"))},null,2)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[8]||(s[8]=l=>i(t).setSort("role_names"))},[s[35]||(s[35]=c("Rôles ",-1)),e("i",{class:p("bi ms-1 "+r("role_names"))},null,2)]),e("th",{style:{cursor:"pointer",width:"80px"},class:"user-select-none",onClick:s[9]||(s[9]=l=>i(t).setSort("is_active"))},[s[36]||(s[36]=c("Statut ",-1)),e("i",{class:p("bi ms-1 "+r("is_active"))},null,2)]),s[37]||(s[37]=e("th",{style:{width:"100px"}},"Actions",-1))])]),e("tbody",null,[(u(!0),m(y,null,f(i(t).sortedUsers,l=>(u(),m("tr",{key:l.id},[e("td",null,[e("input",{type:"checkbox",class:"form-check-input",checked:i(t).isUserSelected(l.id),onChange:n=>i(t).toggleUserSelection(l.id)},null,40,ie)]),e("td",null,[e("strong",null,a(l.username),1),s[38]||(s[38]=e("br",null,null,-1)),e("small",re,"Legacy: "+a(l.legacy_role),1)]),e("td",null,a(l.email),1),e("td",null,a(l.organization_name||"N/A"),1),e("td",null,[e("span",{class:p("badge "+i(t).getRoleBadgeClass(l))},a(l.role_names),3)]),e("td",null,[e("span",{class:p("badge "+(l.is_active?"bg-success":"bg-secondary"))},a(l.is_active?"Actif":"Inactif"),3)]),e("td",null,[e("div",ne,[e("button",{class:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button",id:"dropdown-"+l.id,"data-bs-toggle":"dropdown","aria-expanded":"false"},[...s[39]||(s[39]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)])],8,ae),e("ul",{class:"dropdown-menu","aria-labelledby":"dropdown-"+l.id},[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).editUser(l),["prevent"])},[...s[40]||(s[40]=[e("i",{class:"bi bi-pencil"},null,-1),c(" Modifier ",-1)])],8,ce)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).openRoleModal(l),["prevent"])},[...s[41]||(s[41]=[e("i",{class:"bi bi-shield-check"},null,-1),c(" Gérer les rôles ",-1)])],8,ue)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).toggleUserActive(l),["prevent"])},[e("i",{class:p("bi bi-"+(l.is_active?"x-circle":"check-circle"))},null,2),c(" "+a(l.is_active?"Désactiver":"Activer"),1)],8,me)]),s[44]||(s[44]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).impersonateUser(l),["prevent"])},[...s[42]||(s[42]=[e("i",{class:"bi bi-person-circle"},null,-1),c(" Impersonner ",-1)])],8,pe)]),s[45]||(s[45]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item text-danger",href:"#",onClick:b(n=>i(t).deleteUser(l),["prevent"])},[...s[43]||(s[43]=[e("i",{class:"bi bi-trash"},null,-1),c(" Supprimer ",-1)])],8,be)])],8,de)])])]))),128))])]),i(t).sortedUsers.length===0?(u(),m("div",he," Aucun utilisateur trouvé ")):w("",!0)])])]),e("div",ve,[(u(!0),m(y,null,f(i(t).sortedUsers,l=>(u(),m("div",{key:l.id,class:"card mb-3"},[e("div",ge,[e("div",we,[e("input",{type:"checkbox",class:"form-check-input",id:"check-"+l.id,checked:i(t).isUserSelected(l.id),onChange:n=>i(t).toggleUserSelection(l.id)},null,40,ye),e("label",{class:"form-check-label",for:"check-"+l.id},[e("strong",null,a(l.username),1)],8,fe)]),e("p",ke,[e("small",Ue,a(l.email),1)]),e("p",Ce,[e("span",{class:p("badge "+i(t).getRoleBadgeClass(l))},a(l.role_names),3)]),e("p",_e,[e("span",{class:p("badge "+(l.is_active?"bg-success":"bg-secondary"))},a(l.is_active?"Actif":"Inactif"),3)]),e("div",xe,[e("button",{class:"btn btn-sm btn-outline-secondary dropdown-toggle w-100",type:"button",id:"dropdown-mobile-"+l.id,"data-bs-toggle":"dropdown","aria-expanded":"false"},[...s[46]||(s[46]=[e("i",{class:"bi bi-three-dots"},null,-1),c(" Actions ",-1)])],8,Re),e("ul",{class:"dropdown-menu w-100","aria-labelledby":"dropdown-mobile-"+l.id},[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).editUser(l),["prevent"])},[...s[47]||(s[47]=[e("i",{class:"bi bi-pencil"},null,-1),c(" Modifier ",-1)])],8,Se)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).openRoleModal(l),["prevent"])},[...s[48]||(s[48]=[e("i",{class:"bi bi-shield-check"},null,-1),c(" Gérer les rôles ",-1)])],8,Ae)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).toggleUserActive(l),["prevent"])},[e("i",{class:p("bi bi-"+(l.is_active?"x-circle":"check-circle"))},null,2),c(" "+a(l.is_active?"Désactiver":"Activer"),1)],8,$e)]),s[51]||(s[51]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).impersonateUser(l),["prevent"])},[...s[49]||(s[49]=[e("i",{class:"bi bi-person-circle"},null,-1),c(" Impersonner ",-1)])],8,Le)]),s[52]||(s[52]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item text-danger",href:"#",onClick:b(n=>i(t).deleteUser(l),["prevent"])},[...s[50]||(s[50]=[e("i",{class:"bi bi-trash"},null,-1),c(" Supprimer ",-1)])],8,Ee)])],8,Me)])])]))),128))]),i(t).showRoleModal?(u(),m("div",Ie,[e("div",Be,[e("div",Qe,[e("div",Ve,[e("h5",De,"Gérer les rôles - "+a((h=i(t).editingUser)==null?void 0:h.username),1),e("button",{type:"button",class:"btn-close",onClick:s[10]||(s[10]=l=>i(t).closeRoleModal())})]),e("div",Te,[s[55]||(s[55]=e("div",{class:"alert alert-info"},[e("i",{class:"bi bi-info-circle"}),c(" Sélectionnez un ou plusieurs rôles pour cet utilisateur. Les permissions seront la combinaison de tous les rôles assignés. ")],-1)),(u(!0),m(y,null,f(i(t).roles,l=>(u(),m("div",{key:l.id,class:"form-check"},[g(e("input",{id:"role-"+l.id,type:"checkbox",class:"form-check-input",value:l.id,"onUpdate:modelValue":s[11]||(s[11]=n=>i(t).selectedUserRoles=n)},null,8,ze),[[U,i(t).selectedUserRoles]]),e("label",{for:"role-"+l.id,class:"form-check-label"},[e("strong",null,a(l.display_name),1),e("span",{class:p("badge ms-2 "+(l.is_system?"bg-primary":"bg-secondary"))},a(l.is_system?"Système":"Custom"),3),s[53]||(s[53]=e("br",null,null,-1)),e("small",je,a(l.description),1),s[54]||(s[54]=e("br",null,null,-1)),e("small",Pe,a(l.permission_count)+" permissions",1)],8,Ne)]))),128)),i(t).roles.length===0?(u(),m("div",qe," Aucun rôle disponible ")):w("",!0)]),e("div",Oe,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[12]||(s[12]=l=>i(t).closeRoleModal())}," Annuler "),e("button",{type:"button",class:"btn btn-primary",onClick:s[13]||(s[13]=l=>i(t).saveUserRoles())}," Enregistrer ")])])])])):w("",!0),i(t).showBulkModal?(u(),m("div",Fe,[e("div",Ge,[e("div",Ke,[e("div",He,[e("h5",Je,"Affectation en masse - "+a(i(t).getSelectedUsersText()),1),e("button",{type:"button",class:"btn-close",onClick:s[14]||(s[14]=l=>i(t).closeBulkModal())})]),e("div",We,[s[57]||(s[57]=e("div",{class:"alert alert-warning"},[e("i",{class:"bi bi-exclamation-triangle"}),c(" Les rôles sélectionnés seront "),e("strong",null,"ajoutés"),c(" aux utilisateurs sélectionnés (sans supprimer leurs rôles existants). ")],-1)),(u(!0),m(y,null,f(i(t).roles,l=>(u(),m("div",{key:l.id,class:"form-check"},[g(e("input",{id:"bulk-role-"+l.id,type:"checkbox",class:"form-check-input",value:l.id,"onUpdate:modelValue":s[15]||(s[15]=n=>i(t).bulkRoleIds=n)},null,8,Xe),[[U,i(t).bulkRoleIds]]),e("label",{for:"bulk-role-"+l.id,class:"form-check-label"},[e("strong",null,a(l.display_name),1),e("span",{class:p("badge ms-2 "+(l.is_system?"bg-primary":"bg-secondary"))},a(l.is_system?"Système":"Custom"),3),s[56]||(s[56]=e("br",null,null,-1)),e("small",Ze,a(l.description),1)],8,Ye)]))),128))]),e("div",es,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[16]||(s[16]=l=>i(t).closeBulkModal())}," Annuler "),e("button",{type:"button",class:"btn btn-primary",onClick:s[17]||(s[17]=l=>i(t).bulkAssignRoles())}," Assigner aux "+a(i(t).selectedUsers.length)+" utilisateur(s) ",1)])])])])):w("",!0)])),(u(),R(A,{to:"body"},[g(e("div",{class:p(["modal fade",{show:i(t).showCreateModal}]),"aria-hidden":!i(t).showCreateModal,tabindex:"-1",style:S(i(t).showCreateModal?{display:"flex",visibility:"visible"}:{display:"none",visibility:"hidden"}),onClick:s[27]||(s[27]=b(l=>i(t).closeCreateModal(),["self"]))},[e("div",{class:p(["modal-backdrop fade",{show:i(t).showCreateModal}]),onClick:s[18]||(s[18]=l=>i(t).closeCreateModal())},null,2),e("div",{class:"modal-dialog modal-lg modal-dialog-scrollable",role:"document",onClick:s[26]||(s[26]=b(()=>{},["stop"]))},[e("div",ts,[e("div",ls,[s[58]||(s[58]=e("h5",{class:"modal-title"},[e("i",{class:"bi bi-person-plus-fill"}),c(" Créer un nouvel utilisateur ")],-1)),e("button",{type:"button",class:"btn-close","aria-label":"Fermer",onClick:s[19]||(s[19]=l=>i(t).closeCreateModal())})]),e("div",os,[s[64]||(s[64]=e("div",{class:"alert alert-info"},[e("i",{class:"bi bi-info-circle"}),c(" Créez un nouvel utilisateur et assignez-lui des rôles (optionnel) ")],-1)),e("div",is,[s[59]||(s[59]=e("label",{for:"username",class:"form-label"},"Nom d'utilisateur *",-1)),g(e("input",{id:"username","onUpdate:modelValue":s[20]||(s[20]=l=>i(t).newUser.username=l),type:"text",class:"form-control",placeholder:"Ex: john.doe",required:""},null,512),[[k,i(t).newUser.username]])]),e("div",rs,[s[60]||(s[60]=e("label",{for:"email",class:"form-label"},"Email *",-1)),g(e("input",{id:"email","onUpdate:modelValue":s[21]||(s[21]=l=>i(t).newUser.email=l),type:"email",class:"form-control",placeholder:"Ex: john.doe@example.com",required:""},null,512),[[k,i(t).newUser.email]])]),e("div",ns,[s[61]||(s[61]=e("label",{for:"password",class:"form-label"},"Mot de passe *",-1)),g(e("input",{id:"password","onUpdate:modelValue":s[22]||(s[22]=l=>i(t).newUser.password=l),type:"password",class:"form-control",placeholder:"Minimum 8 caractères",required:""},null,512),[[k,i(t).newUser.password]]),s[62]||(s[62]=e("small",{class:"form-text text-muted"},"Le mot de passe sera hashé automatiquement",-1))]),e("div",as,[s[63]||(s[63]=e("label",{class:"form-label"},"Rôles (optionnel)",-1)),(u(!0),m(y,null,f(i(t).roles,l=>(u(),m("div",{key:l.id,class:"form-check"},[g(e("input",{id:"create-role-"+l.id,type:"checkbox",class:"form-check-input",value:l.id,"onUpdate:modelValue":s[23]||(s[23]=n=>i(t).newUser.role_ids=n)},null,8,ds),[[U,i(t).newUser.role_ids]]),e("label",{class:"form-check-label",for:"create-role-"+l.id},[e("strong",null,a(l.display_name),1),e("small",us,a(l.description||"Aucune description"),1)],8,cs)]))),128))])]),e("div",ms,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[24]||(s[24]=l=>i(t).closeCreateModal())}," Annuler "),e("button",{type:"button",class:"btn btn-success",onClick:s[25]||(s[25]=l=>i(t).createUser())},[...s[65]||(s[65]=[e("i",{class:"bi bi-check-lg"},null,-1),c(" Créer l'utilisateur ",-1)])])])])])],14,ss),[[M,i(t).showCreateModal]])]))])}}},bs=j(ps,[["__scopeId","data-v-89b1a78f"]]),_=$(bs);_.use(E());_.mount("#admin-users-app");
