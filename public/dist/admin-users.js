import{i as x,o as u,c as m,u as i,a as e,t as a,j as R,b as c,e as g,v as k,d as w,n as p,F as f,l as y,w as b,k as U,B as M,C as S,q as A,D as $,h as L}from"./chunks/runtime-dom.esm-bundler-CuNObg1-.js";import{d as E,c as I}from"./chunks/pinia-gLxYYWQL.js";import{_ as B}from"./chunks/BackButton-DzFd1NqY.js";import{al as V,am as Q,an as D,ao as T,ap as z,aq as N,a4 as P,ar as j}from"./chunks/index-nogkb2JM.js";import{_ as q}from"./chunks/_plugin-vue_export-helper-DlAUqK2U.js";const O=E("adminUsers",{state:()=>({users:[],roles:[],loading:!0,error:null,editingUser:null,selectedUserRoles:[],showRoleModal:!1,showBulkModal:!1,showCreateModal:!1,selectedUsers:[],bulkRoleIds:[],searchQuery:"",sortColumn:"username",sortDirection:"asc",newUser:{username:"",email:"",password:"",role_ids:[]}}),getters:{filteredUsers(o){if(!o.searchQuery)return o.users;const t=o.searchQuery.toLowerCase();return o.users.filter(r=>r.username&&r.username.toLowerCase().includes(t)||r.email&&r.email.toLowerCase().includes(t)||r.role_names&&r.role_names.toLowerCase().includes(t))},sortedUsers(o){const r=[...o.searchQuery?o.users.filter(h=>h.username&&h.username.toLowerCase().includes(o.searchQuery.toLowerCase())||h.email&&h.email.toLowerCase().includes(o.searchQuery.toLowerCase())||h.role_names&&h.role_names.toLowerCase().includes(o.searchQuery.toLowerCase())):o.users],d=o.sortColumn||"username",s=o.sortDirection||"asc";return r.sort((h,l)=>{let n=h[d],v=l[d];if(d==="is_active")return n=n?1:0,v=v?1:0,s==="asc"?n-v:v-n;if(d==="id")return n=Number(n)||0,v=Number(v)||0,s==="asc"?n-v:v-n;n=(n??"").toString().toLowerCase(),v=(v??"").toString().toLowerCase();const C=n.localeCompare(v,"fr");return s==="asc"?C:-C}),r},allSelected(o){const t=o.searchQuery?o.users.filter(r=>r.username&&r.username.toLowerCase().includes(o.searchQuery.toLowerCase())||r.email&&r.email.toLowerCase().includes(o.searchQuery.toLowerCase())||r.role_names&&r.role_names.toLowerCase().includes(o.searchQuery.toLowerCase())):o.users;return t.length>0&&t.every(r=>o.selectedUsers.includes(r.id))},someSelected(o){if(o.selectedUsers.length===0)return!1;const t=o.searchQuery?o.users.filter(d=>d.username&&d.username.toLowerCase().includes(o.searchQuery.toLowerCase())||d.email&&d.email.toLowerCase().includes(o.searchQuery.toLowerCase())||d.role_names&&d.role_names.toLowerCase().includes(o.searchQuery.toLowerCase())):o.users;return!(t.length>0&&t.every(d=>o.selectedUsers.includes(d.id)))}},actions:{async loadUsers(){try{const o=await j();o.success?this.users=o.users||[]:this.error=o.error||"Erreur lors du chargement des utilisateurs"}catch(o){console.error("Error loading users:",o),this.error=o.message||"Erreur de connexion au serveur"}},async loadRoles(){try{const o=await P();o.success?this.roles=o.roles||[]:this.error=o.error||"Erreur lors du chargement des rôles"}catch(o){console.error("Error loading roles:",o),this.error=o.message||"Erreur de connexion au serveur"}},openCreateModal(){this.newUser={username:"",email:"",password:"",role_ids:[]},this.showCreateModal=!0},closeCreateModal(){this.showCreateModal=!1,this.newUser={username:"",email:"",password:"",role_ids:[]}},async createUser(){if(!this.newUser.username||!this.newUser.email||!this.newUser.password){alert("Veuillez remplir tous les champs obligatoires");return}try{await N(this.newUser),alert("Utilisateur créé avec succès"),this.closeCreateModal(),await this.loadUsers()}catch(o){alert(o.message||"Erreur lors de la création")}},async openRoleModal(o){try{const t=await z(o.id);t.success?(this.editingUser={...t.user},this.selectedUserRoles=t.role_ids||[],this.showRoleModal=!0):alert("Erreur: "+t.error)}catch(t){alert(t.message||"Erreur de chargement")}},async saveUserRoles(){if(this.editingUser)try{await T(this.editingUser.id,{role_ids:this.selectedUserRoles}),this.showRoleModal=!1,this.editingUser=null,this.selectedUserRoles=[],await this.loadUsers(),alert("Rôles mis à jour avec succès")}catch(o){alert(o.message||"Erreur lors de la sauvegarde")}},closeRoleModal(){this.showRoleModal=!1,this.editingUser=null,this.selectedUserRoles=[]},toggleSelectAll(){this.allSelected?this.selectedUsers=[]:this.selectedUsers=this.sortedUsers.map(o=>o.id)},setSort(o){this.sortColumn===o?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=o,this.sortDirection="asc")},toggleUserSelection(o){this.selectedUsers.indexOf(o)>-1?this.selectedUsers=this.selectedUsers.filter(r=>r!==o):this.selectedUsers=[...this.selectedUsers,o]},isUserSelected(o){return this.selectedUsers.includes(o)},openBulkAssignModal(){if(this.selectedUsers.length===0){alert("Veuillez sélectionner au moins un utilisateur");return}this.bulkRoleIds=[],this.showBulkModal=!0},closeBulkModal(){this.showBulkModal=!1,this.bulkRoleIds=[]},async bulkAssignRoles(){if(this.bulkRoleIds.length===0){alert("Veuillez sélectionner au moins un rôle");return}try{const o=await D({user_ids:this.selectedUsers,role_ids:this.bulkRoleIds});this.showBulkModal=!1,this.selectedUsers=[],this.bulkRoleIds=[],await this.loadUsers(),alert(o.message||"Rôles assignés avec succès")}catch(o){alert(o.message||"Erreur lors de l'assignation")}},getRoleBadgeClass(o){return o.role_count===0?"bg-warning":"bg-success"},getSelectedUsersText(){return`${this.selectedUsers.length} utilisateur(s) sélectionné(s)`},async toggleUserActive(o){const t=!o.is_active,r=t?`Activer l'utilisateur "${o.username}" ?

Il pourra se connecter à nouveau.`:`Désactiver l'utilisateur "${o.username}" ?

Il ne pourra plus se connecter.`;if(confirm(r))try{await Q(o.id,{is_active:t}),await this.loadUsers(),alert(`Utilisateur ${t?"activé":"désactivé"} avec succès`)}catch(d){alert(d.message||"Erreur lors de la modification")}},impersonateUser(o){if(!confirm(`Voulez-vous vous connecter en tant que "${o.username}" ?`))return;const t=document.createElement("form");t.method="POST",t.action="/admin/impersonate";const r=document.createElement("input");r.type="hidden",r.name="_csrf",r.value=typeof window<"u"&&window.CSRF_TOKEN?window.CSRF_TOKEN:"",t.appendChild(r);const d=document.createElement("input");d.type="hidden",d.name="user_id",d.value=o.id,t.appendChild(d),document.body.appendChild(t),t.submit()},editUser(o){window.location.href=`/admin/users/${o.id}/edit`},async deleteUser(o){if(confirm(`⚠️ ATTENTION : Êtes-vous sûr de vouloir SUPPRIMER l'utilisateur "${o.username}" ?

Cette action est IRRÉVERSIBLE.`))try{await V(o.id),await this.loadUsers(),alert("Utilisateur supprimé avec succès")}catch(t){alert(t.message||"Erreur lors de la suppression")}},async loadData(){this.loading=!0,this.error=null;try{await Promise.all([this.loadUsers(),this.loadRoles()])}catch(o){this.error=o.message||"Erreur d'initialisation"}finally{this.loading=!1}}}}),F={key:0,class:"text-center py-5"},G={key:1,class:"alert alert-danger"},K={key:2},H={class:"d-flex justify-content-between align-items-center mb-4"},J={class:"d-flex gap-2"},W={class:"row mb-4"},X={class:"col-md-8"},Y={class:"col-md-4"},Z=["disabled"],ee={key:0,class:"alert alert-info d-flex justify-content-between align-items-center"},se={class:"d-none d-md-block"},te={class:"card"},le={class:"card-body"},oe={class:"table table-hover"},ie={class:"thead-admin-site"},re={style:{width:"40px"}},ne=["checked","indeterminate"],ae=["checked","onChange"],de={class:"text-muted"},ce={class:"dropdown"},ue=["id"],me=["aria-labelledby"],pe=["onClick"],be=["onClick"],he=["onClick"],ve=["onClick"],ge=["onClick"],we={key:0,class:"text-center text-muted py-4"},fe={class:"d-md-none"},ye={class:"card-body"},ke={class:"form-check mb-3"},Ue=["id","checked","onChange"],Ce=["for"],_e={class:"card-text mb-2"},xe={class:"text-muted"},Re={class:"card-text mb-2"},Me={class:"card-text mb-3"},Se={class:"dropdown w-100"},Ae=["id"],$e=["aria-labelledby"],Le=["onClick"],Ee=["onClick"],Ie=["onClick"],Be=["onClick"],Ve=["onClick"],Qe={key:1,class:"modal show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},De={class:"modal-dialog modal-lg"},Te={class:"modal-content"},ze={class:"modal-header"},Ne={class:"modal-title"},Pe={class:"modal-body"},je=["id","value"],qe=["for"],Oe={class:"text-muted"},Fe={class:"text-muted"},Ge={key:0,class:"text-center text-muted py-4"},Ke={class:"modal-footer"},He={key:2,class:"modal show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Je={class:"modal-dialog modal-lg"},We={class:"modal-content"},Xe={class:"modal-header"},Ye={class:"modal-title"},Ze={class:"modal-body"},es=["id","value"],ss=["for"],ts={class:"text-muted"},ls={class:"modal-footer"},os=["aria-hidden"],is={class:"modal-content"},rs={class:"modal-header"},ns={class:"modal-body"},as={class:"mb-3"},ds={class:"mb-3"},cs={class:"mb-3"},us={class:"mb-3"},ms=["id","value"],ps=["for"],bs={class:"text-muted d-block"},hs={class:"modal-footer"},vs={__name:"AdminUsersPage",setup(o){const t=O();function r(d){return t.sortColumn!==d?"bi-arrow-down-up text-secondary opacity-50":t.sortDirection==="asc"?"bi-arrow-up":"bi-arrow-down"}return x(()=>{if(t.loadData(),new URLSearchParams(window.location.search).get("modal")==="new"){t.openCreateModal();const s=new URL(window.location.href);s.searchParams.delete("modal"),window.history.replaceState({},"",s.toString())}}),(d,s)=>{var h;return u(),m("div",null,[i(t).loading?(u(),m("div",F,[...s[28]||(s[28]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")],-1),e("p",{class:"mt-3 text-muted"},"Chargement des utilisateurs...",-1)])])):i(t).error?(u(),m("div",G,a(i(t).error),1)):(u(),m("div",K,[e("div",H,[s[30]||(s[30]=e("h2",{class:"mb-0"},"Gestion des Utilisateurs",-1)),e("div",J,[R(B),e("button",{type:"button",class:"btn btn-success",onClick:s[0]||(s[0]=l=>i(t).openCreateModal())},[...s[29]||(s[29]=[e("i",{class:"bi bi-person-plus-fill"},null,-1),c(" Ajouter un utilisateur ",-1)])])])]),e("div",W,[e("div",X,[g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>i(t).searchQuery=l),type:"text",class:"form-control",placeholder:"Rechercher un utilisateur..."},null,512),[[k,i(t).searchQuery]])]),e("div",Y,[e("button",{type:"button",class:"btn btn-primary w-100",disabled:i(t).selectedUsers.length===0,onClick:s[2]||(s[2]=l=>i(t).openBulkAssignModal())},[...s[31]||(s[31]=[e("i",{class:"bi bi-people-fill"},null,-1),c(" Affectation en masse ",-1)])],8,Z)])]),i(t).selectedUsers.length>0?(u(),m("div",ee,[e("span",null,a(i(t).getSelectedUsersText()),1),e("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:s[3]||(s[3]=l=>i(t).selectedUsers=[])}," Désélectionner tout ")])):w("",!0),e("div",se,[e("div",te,[e("div",le,[e("table",oe,[e("thead",ie,[e("tr",null,[e("th",re,[e("input",{type:"checkbox",class:"form-check-input",checked:i(t).allSelected,indeterminate:i(t).someSelected,onChange:s[4]||(s[4]=l=>i(t).toggleSelectAll())},null,40,ne)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[5]||(s[5]=l=>i(t).setSort("username"))},[s[32]||(s[32]=c("Utilisateur ",-1)),e("i",{class:p("bi ms-1 "+r("username"))},null,2)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[6]||(s[6]=l=>i(t).setSort("email"))},[s[33]||(s[33]=c("Email ",-1)),e("i",{class:p("bi ms-1 "+r("email"))},null,2)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[7]||(s[7]=l=>i(t).setSort("organization_name"))},[s[34]||(s[34]=c("Organisation ",-1)),e("i",{class:p("bi ms-1 "+r("organization_name"))},null,2)]),e("th",{style:{cursor:"pointer"},class:"user-select-none",onClick:s[8]||(s[8]=l=>i(t).setSort("role_names"))},[s[35]||(s[35]=c("Rôles ",-1)),e("i",{class:p("bi ms-1 "+r("role_names"))},null,2)]),e("th",{style:{cursor:"pointer",width:"80px"},class:"user-select-none",onClick:s[9]||(s[9]=l=>i(t).setSort("is_active"))},[s[36]||(s[36]=c("Statut ",-1)),e("i",{class:p("bi ms-1 "+r("is_active"))},null,2)]),s[37]||(s[37]=e("th",{style:{width:"100px"}},"Actions",-1))])]),e("tbody",null,[(u(!0),m(f,null,y(i(t).sortedUsers,l=>(u(),m("tr",{key:l.id},[e("td",null,[e("input",{type:"checkbox",class:"form-check-input",checked:i(t).isUserSelected(l.id),onChange:n=>i(t).toggleUserSelection(l.id)},null,40,ae)]),e("td",null,[e("strong",null,a(l.username),1),s[38]||(s[38]=e("br",null,null,-1)),e("small",de,"Legacy: "+a(l.legacy_role),1)]),e("td",null,a(l.email),1),e("td",null,a(l.organization_name||"N/A"),1),e("td",null,[e("span",{class:p("badge "+i(t).getRoleBadgeClass(l))},a(l.role_names),3)]),e("td",null,[e("span",{class:p("badge "+(l.is_active?"bg-success":"bg-secondary"))},a(l.is_active?"Actif":"Inactif"),3)]),e("td",null,[e("div",ce,[e("button",{class:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button",id:"dropdown-"+l.id,"data-bs-toggle":"dropdown","aria-expanded":"false"},[...s[39]||(s[39]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)])],8,ue),e("ul",{class:"dropdown-menu","aria-labelledby":"dropdown-"+l.id},[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).editUser(l),["prevent"])},[...s[40]||(s[40]=[e("i",{class:"bi bi-pencil"},null,-1),c(" Modifier ",-1)])],8,pe)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).openRoleModal(l),["prevent"])},[...s[41]||(s[41]=[e("i",{class:"bi bi-shield-check"},null,-1),c(" Gérer les rôles ",-1)])],8,be)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).toggleUserActive(l),["prevent"])},[e("i",{class:p("bi bi-"+(l.is_active?"x-circle":"check-circle"))},null,2),c(" "+a(l.is_active?"Désactiver":"Activer"),1)],8,he)]),s[44]||(s[44]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).impersonateUser(l),["prevent"])},[...s[42]||(s[42]=[e("i",{class:"bi bi-person-circle"},null,-1),c(" Impersonner ",-1)])],8,ve)]),s[45]||(s[45]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item text-danger",href:"#",onClick:b(n=>i(t).deleteUser(l),["prevent"])},[...s[43]||(s[43]=[e("i",{class:"bi bi-trash"},null,-1),c(" Supprimer ",-1)])],8,ge)])],8,me)])])]))),128))])]),i(t).sortedUsers.length===0?(u(),m("div",we," Aucun utilisateur trouvé ")):w("",!0)])])]),e("div",fe,[(u(!0),m(f,null,y(i(t).sortedUsers,l=>(u(),m("div",{key:l.id,class:"card mb-3"},[e("div",ye,[e("div",ke,[e("input",{type:"checkbox",class:"form-check-input",id:"check-"+l.id,checked:i(t).isUserSelected(l.id),onChange:n=>i(t).toggleUserSelection(l.id)},null,40,Ue),e("label",{class:"form-check-label",for:"check-"+l.id},[e("strong",null,a(l.username),1)],8,Ce)]),e("p",_e,[e("small",xe,a(l.email),1)]),e("p",Re,[e("span",{class:p("badge "+i(t).getRoleBadgeClass(l))},a(l.role_names),3)]),e("p",Me,[e("span",{class:p("badge "+(l.is_active?"bg-success":"bg-secondary"))},a(l.is_active?"Actif":"Inactif"),3)]),e("div",Se,[e("button",{class:"btn btn-sm btn-outline-secondary dropdown-toggle w-100",type:"button",id:"dropdown-mobile-"+l.id,"data-bs-toggle":"dropdown","aria-expanded":"false"},[...s[46]||(s[46]=[e("i",{class:"bi bi-three-dots"},null,-1),c(" Actions ",-1)])],8,Ae),e("ul",{class:"dropdown-menu w-100","aria-labelledby":"dropdown-mobile-"+l.id},[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).editUser(l),["prevent"])},[...s[47]||(s[47]=[e("i",{class:"bi bi-pencil"},null,-1),c(" Modifier ",-1)])],8,Le)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).openRoleModal(l),["prevent"])},[...s[48]||(s[48]=[e("i",{class:"bi bi-shield-check"},null,-1),c(" Gérer les rôles ",-1)])],8,Ee)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).toggleUserActive(l),["prevent"])},[e("i",{class:p("bi bi-"+(l.is_active?"x-circle":"check-circle"))},null,2),c(" "+a(l.is_active?"Désactiver":"Activer"),1)],8,Ie)]),s[51]||(s[51]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:b(n=>i(t).impersonateUser(l),["prevent"])},[...s[49]||(s[49]=[e("i",{class:"bi bi-person-circle"},null,-1),c(" Impersonner ",-1)])],8,Be)]),s[52]||(s[52]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item text-danger",href:"#",onClick:b(n=>i(t).deleteUser(l),["prevent"])},[...s[50]||(s[50]=[e("i",{class:"bi bi-trash"},null,-1),c(" Supprimer ",-1)])],8,Ve)])],8,$e)])])]))),128))]),i(t).showRoleModal?(u(),m("div",Qe,[e("div",De,[e("div",Te,[e("div",ze,[e("h5",Ne,"Gérer les rôles - "+a((h=i(t).editingUser)==null?void 0:h.username),1),e("button",{type:"button",class:"btn-close",onClick:s[10]||(s[10]=l=>i(t).closeRoleModal())})]),e("div",Pe,[s[55]||(s[55]=e("div",{class:"alert alert-info"},[e("i",{class:"bi bi-info-circle"}),c(" Sélectionnez un ou plusieurs rôles pour cet utilisateur. Les permissions seront la combinaison de tous les rôles assignés. ")],-1)),(u(!0),m(f,null,y(i(t).roles,l=>(u(),m("div",{key:l.id,class:"form-check"},[g(e("input",{id:"role-"+l.id,type:"checkbox",class:"form-check-input",value:l.id,"onUpdate:modelValue":s[11]||(s[11]=n=>i(t).selectedUserRoles=n)},null,8,je),[[U,i(t).selectedUserRoles]]),e("label",{for:"role-"+l.id,class:"form-check-label"},[e("strong",null,a(l.display_name),1),e("span",{class:p("badge ms-2 "+(l.is_system?"bg-primary":"bg-secondary"))},a(l.is_system?"Système":"Custom"),3),s[53]||(s[53]=e("br",null,null,-1)),e("small",Oe,a(l.description),1),s[54]||(s[54]=e("br",null,null,-1)),e("small",Fe,a(l.permission_count)+" permissions",1)],8,qe)]))),128)),i(t).roles.length===0?(u(),m("div",Ge," Aucun rôle disponible ")):w("",!0)]),e("div",Ke,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[12]||(s[12]=l=>i(t).closeRoleModal())}," Annuler "),e("button",{type:"button",class:"btn btn-primary",onClick:s[13]||(s[13]=l=>i(t).saveUserRoles())}," Enregistrer ")])])])])):w("",!0),i(t).showBulkModal?(u(),m("div",He,[e("div",Je,[e("div",We,[e("div",Xe,[e("h5",Ye,"Affectation en masse - "+a(i(t).getSelectedUsersText()),1),e("button",{type:"button",class:"btn-close",onClick:s[14]||(s[14]=l=>i(t).closeBulkModal())})]),e("div",Ze,[s[57]||(s[57]=e("div",{class:"alert alert-warning"},[e("i",{class:"bi bi-exclamation-triangle"}),c(" Les rôles sélectionnés seront "),e("strong",null,"ajoutés"),c(" aux utilisateurs sélectionnés (sans supprimer leurs rôles existants). ")],-1)),(u(!0),m(f,null,y(i(t).roles,l=>(u(),m("div",{key:l.id,class:"form-check"},[g(e("input",{id:"bulk-role-"+l.id,type:"checkbox",class:"form-check-input",value:l.id,"onUpdate:modelValue":s[15]||(s[15]=n=>i(t).bulkRoleIds=n)},null,8,es),[[U,i(t).bulkRoleIds]]),e("label",{for:"bulk-role-"+l.id,class:"form-check-label"},[e("strong",null,a(l.display_name),1),e("span",{class:p("badge ms-2 "+(l.is_system?"bg-primary":"bg-secondary"))},a(l.is_system?"Système":"Custom"),3),s[56]||(s[56]=e("br",null,null,-1)),e("small",ts,a(l.description),1)],8,ss)]))),128))]),e("div",ls,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[16]||(s[16]=l=>i(t).closeBulkModal())}," Annuler "),e("button",{type:"button",class:"btn btn-primary",onClick:s[17]||(s[17]=l=>i(t).bulkAssignRoles())}," Assigner aux "+a(i(t).selectedUsers.length)+" utilisateur(s) ",1)])])])])):w("",!0)])),(u(),M($,{to:"body"},[g(e("div",{class:p(["modal fade",{show:i(t).showCreateModal}]),"aria-hidden":!i(t).showCreateModal,tabindex:"-1",style:A(i(t).showCreateModal?{display:"flex",visibility:"visible"}:{display:"none",visibility:"hidden"}),onClick:s[27]||(s[27]=b(l=>i(t).closeCreateModal(),["self"]))},[e("div",{class:p(["modal-backdrop fade",{show:i(t).showCreateModal}]),onClick:s[18]||(s[18]=l=>i(t).closeCreateModal())},null,2),e("div",{class:"modal-dialog modal-lg modal-dialog-scrollable",role:"document",onClick:s[26]||(s[26]=b(()=>{},["stop"]))},[e("div",is,[e("div",rs,[s[58]||(s[58]=e("h5",{class:"modal-title"},[e("i",{class:"bi bi-person-plus-fill"}),c(" Créer un nouvel utilisateur ")],-1)),e("button",{type:"button",class:"btn-close","aria-label":"Fermer",onClick:s[19]||(s[19]=l=>i(t).closeCreateModal())})]),e("div",ns,[s[64]||(s[64]=e("div",{class:"alert alert-info"},[e("i",{class:"bi bi-info-circle"}),c(" Créez un nouvel utilisateur et assignez-lui des rôles (optionnel) ")],-1)),e("div",as,[s[59]||(s[59]=e("label",{for:"username",class:"form-label"},"Nom d'utilisateur *",-1)),g(e("input",{id:"username","onUpdate:modelValue":s[20]||(s[20]=l=>i(t).newUser.username=l),type:"text",class:"form-control",placeholder:"Ex: john.doe",required:""},null,512),[[k,i(t).newUser.username]])]),e("div",ds,[s[60]||(s[60]=e("label",{for:"email",class:"form-label"},"Email *",-1)),g(e("input",{id:"email","onUpdate:modelValue":s[21]||(s[21]=l=>i(t).newUser.email=l),type:"email",class:"form-control",placeholder:"Ex: john.doe@example.com",required:""},null,512),[[k,i(t).newUser.email]])]),e("div",cs,[s[61]||(s[61]=e("label",{for:"password",class:"form-label"},"Mot de passe *",-1)),g(e("input",{id:"password","onUpdate:modelValue":s[22]||(s[22]=l=>i(t).newUser.password=l),type:"password",class:"form-control",placeholder:"Minimum 8 caractères",required:""},null,512),[[k,i(t).newUser.password]]),s[62]||(s[62]=e("small",{class:"form-text text-muted"},"Le mot de passe sera hashé automatiquement",-1))]),e("div",us,[s[63]||(s[63]=e("label",{class:"form-label"},"Rôles (optionnel)",-1)),(u(!0),m(f,null,y(i(t).roles,l=>(u(),m("div",{key:l.id,class:"form-check"},[g(e("input",{id:"create-role-"+l.id,type:"checkbox",class:"form-check-input",value:l.id,"onUpdate:modelValue":s[23]||(s[23]=n=>i(t).newUser.role_ids=n)},null,8,ms),[[U,i(t).newUser.role_ids]]),e("label",{class:"form-check-label",for:"create-role-"+l.id},[e("strong",null,a(l.display_name),1),e("small",bs,a(l.description||"Aucune description"),1)],8,ps)]))),128))])]),e("div",hs,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[24]||(s[24]=l=>i(t).closeCreateModal())}," Annuler "),e("button",{type:"button",class:"btn btn-success",onClick:s[25]||(s[25]=l=>i(t).createUser())},[...s[65]||(s[65]=[e("i",{class:"bi bi-check-lg"},null,-1),c(" Créer l'utilisateur ",-1)])])])])])],14,os),[[S,i(t).showCreateModal]])]))])}}},gs=q(vs,[["__scopeId","data-v-4167be34"]]),_=L(gs);_.use(I());_.mount("#admin-users-app");
