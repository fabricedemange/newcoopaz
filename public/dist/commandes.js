import{i as $,o as a,c as r,a as e,b as d,j as M,u as l,n as k,t as o,d as _,F as p,e as L,v as R,l as y,h as S}from"./chunks/runtime-dom.esm-bundler-CuNObg1-.js";import{d as z,c as q}from"./chunks/pinia-gLxYYWQL.js";import{s as B,b as O,r as j,c as U,d as H,e as K,A as Q}from"./chunks/index-CLmjs_4-.js";import{_ as G}from"./chunks/BackButton-DzFd1NqY.js";import{_ as J}from"./chunks/_plugin-vue_export-helper-DlAUqK2U.js";const W=z("commandes",{state:()=>({loading:!1,error:null,authRequired:!1,commandes:[],ventes:[],activeTab:"catalogues",searchTerm:"",sortColumn:"created_at",sortDirection:"desc",savingNotes:{},savedNotes:{},errorNotes:{},showDetailModal:!1,selectedVente:null}),getters:{filteredCommandes(i){let n=[...i.commandes];if(i.searchTerm){const g=i.searchTerm.toLowerCase();n=n.filter(c=>c.originalname&&c.originalname.toLowerCase().includes(g)||c.catalog_description&&c.catalog_description.toLowerCase().includes(g)||c.note&&c.note.toLowerCase().includes(g)||String(c.id).includes(g))}return n},sortedCommandes(i){let n=[...i.commandes||[]];if(i.searchTerm){const m=i.searchTerm.toLowerCase();n=n.filter(u=>u.originalname&&u.originalname.toLowerCase().includes(m)||u.catalog_description&&u.catalog_description.toLowerCase().includes(m)||u.note&&u.note.toLowerCase().includes(m)||String(u.id).includes(m))}const g=i.sortColumn,c=i.sortDirection;return n.sort((m,u)=>{let v,h;switch(g){case"id":v=m.id,h=u.id;break;case"catalogue":v=(m.originalname||"").toLowerCase(),h=(u.originalname||"").toLowerCase();break;case"expiration_date":v=m.expiration_date?new Date(m.expiration_date).getTime():0,h=u.expiration_date?new Date(u.expiration_date).getTime():0;break;case"date_livraison":v=m.date_livraison?new Date(m.date_livraison).getTime():0,h=u.date_livraison?new Date(u.date_livraison).getTime():0;break;case"created_at":v=m.created_at?new Date(m.created_at).getTime():0,h=u.created_at?new Date(u.created_at).getTime():0;break;default:return 0}if(typeof v=="string"){const b=v.localeCompare(h);return c==="asc"?b:-b}return c==="asc"?v>h?1:v<h?-1:0:v<h?1:v>h?-1:0})},sortIcon(i){return n=>i.sortColumn!==n?"arrow-down-up":i.sortDirection==="asc"?"arrow-up":"arrow-down"}},actions:{async loadAll(){this.loading=!0,this.error=null,this.authRequired=!1;try{const[i,n]=await Promise.all([H(),K()]);i.success&&(this.commandes=i.commandes||[]),n.success&&(this.ventes=n.ventes||[])}catch(i){this.error=i.message,i.code===Q&&(this.authRequired=!0),console.error("commandes loadAll:",i)}finally{this.loading=!1}},setActiveTab(i){this.activeTab=i},setSearchTerm(i){this.searchTerm=i},sortBy(i){this.sortColumn===i?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=i,this.sortDirection="asc")},async saveNote(i,n,g){this.savingNotes[i]=!0,delete this.savedNotes[i],delete this.errorNotes[i];try{await U(i,n,g);const c=this.commandes.find(m=>m.id===i);c&&(c.note=n),this.savedNotes[i]=!0,setTimeout(()=>{delete this.savedNotes[i]},2e3)}catch(c){this.errorNotes[i]=!0,setTimeout(()=>delete this.errorNotes[i],3e3),console.error("saveNote:",c)}finally{delete this.savingNotes[i]}},async reopenCommande(i,n){await j(i,n),typeof window<"u"&&window.location.reload()},async loadVenteDetail(i){try{const n=await O(i);if(n.success)this.selectedVente=n,this.showDetailModal=!0;else throw new Error(n.error||"Erreur chargement détail")}catch(n){console.error("loadVenteDetail:",n),typeof window<"u"&&alert("Erreur : "+n.message)}},closeDetailModal(){this.showDetailModal=!1,this.selectedVente=null},async sendTicketPDF(i){try{const n=await B(i);if(n.success&&typeof window<"u")alert("Email envoyé avec succès.");else throw new Error(n.error||"Erreur envoi")}catch(n){console.error("sendTicketPDF:",n),typeof window<"u"&&alert("Erreur : "+n.message)}}}}),X={class:"admin-content-wrapper"},Y={class:"container-fluid mt-4"},Z={class:"row mb-4"},I={class:"col-12"},ee={class:"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-4"},te={class:"nav nav-tabs mb-4",role:"tablist"},se={class:"nav-item",role:"presentation"},ne={class:"nav-item",role:"presentation"},oe={key:0,class:"alert alert-danger alert-dismissible fade show"},le={key:0,class:"text-center py-5"},ie={key:1,class:"alert alert-info text-center"},ae={class:"row mb-3"},re={class:"col-md-6"},de={class:"input-group"},ce={class:"col-md-6 text-end"},ue={class:"text-muted"},me={key:0,class:"alert alert-warning text-center"},be={class:"d-none d-md-block"},_e={class:"table-responsive"},pe={class:"table table-hover"},ve={class:"thead-precommandes"},he=["onClick"],fe={class:"text-muted"},ge={key:0,class:"badge bg-danger"},ye={class:"mt-2"},ke={class:"ms-2"},we={key:0,class:"text-info"},xe={key:1,class:"text-success"},Ce={key:2,class:"text-danger"},De=["value","onInput"],Te={class:"d-flex flex-column gap-1"},Ne=["href"],Ve=["onClick"],Fe={key:1,class:"badge bg-secondary"},Ae={class:"d-md-none"},Ee={class:"card-body p-2",style:{"font-size":"0.7rem"}},Pe={class:"row g-1 mb-2"},$e={class:"col-6 text-start"},Me={class:"mb-1"},Le={key:0,class:"badge bg-danger",style:{"font-size":"0.6rem"}},Re={class:"mb-1",style:{"font-size":"0.65rem"}},Se={style:{"font-size":"0.65rem"}},ze={class:"col-6 text-end"},qe={class:"mb-1"},Be={style:{"font-size":"0.65rem"}},Oe={key:0,class:"mb-2",style:{"font-size":"0.65rem"}},je={key:1,class:"text-muted mb-2",style:{"font-size":"0.65rem"}},Ue={class:"text-center"},He=["href"],Ke=["onClick"],Qe={key:0,class:"text-center py-5"},Ge={key:1,class:"alert alert-info text-center"},Je={class:"row mb-3"},We={class:"col-12 text-end"},Xe={class:"text-muted"},Ye={class:"d-none d-md-block"},Ze={class:"table-responsive"},Ie={class:"table table-hover table-commandes-caisse"},et={class:"col-ticket"},tt={class:"badge bg-secondary"},st={key:0},nt={key:1,class:"text-muted"},ot={class:"text-primary"},lt={key:0,class:"badge bg-secondary"},it={key:1,class:"text-muted"},at=["onClick"],rt={class:"d-md-none"},dt={class:"card-body"},ct={class:"d-flex justify-content-between align-items-start mb-2"},ut={class:"card-title mb-0"},mt={class:"badge bg-success"},bt={class:"card-text mb-1"},_t={key:0,class:"text-muted"},pt={key:1},vt={class:"text-muted"},ht={class:"text-center mt-2"},ft=["onClick"],gt={key:0,class:"modal show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"}},yt={class:"modal-dialog modal-xl"},kt={class:"modal-content"},wt={class:"modal-header"},xt={class:"modal-title"},Ct={class:"modal-body"},Dt={class:"row mb-4"},Tt={class:"col-md-6"},Nt={class:"row"},Vt={class:"col-sm-8"},Ft={class:"col-sm-8"},At={class:"col-sm-8"},Et={class:"col-sm-8"},Pt={class:"text-primary"},$t={class:"table-responsive mb-4"},Mt={class:"table table-sm table-bordered"},Lt={key:0,class:"badge bg-warning text-dark ms-2"},Rt={class:"text-end"},St={class:"text-end"},zt={class:"text-end"},qt={class:"table-light"},Bt={class:"text-end"},Ot={class:"text-primary"},jt={class:"table-responsive"},Ut={class:"table table-sm"},Ht={class:"text-end"},Kt={class:"modal-footer"},Qt=["href"],Gt={__name:"CommandesPage",setup(i){const n=W(),g=[{key:"id",label:"ID"},{key:"catalogue",label:"Catalogue"},{key:"expiration_date",label:"Expiration"},{key:"date_livraison",label:"Livraison"},{key:"created_at",label:"Date commande"}];let c={};function m(b,t){c[b]&&clearTimeout(c[b]),c[b]=setTimeout(()=>{n.saveNote(b,t,typeof window<"u"?window.CSRF_TOKEN:""),delete c[b]},1e3)}function u(b){confirm("Confirmer la réouverture de cette commande en panier ?")&&n.reopenCommande(b,typeof window<"u"?window.CSRF_TOKEN:"")}function v(b){b&&confirm("Envoyer le ticket par email ?")&&n.sendTicketPDF(b)}function h(b){return b?new Date(b).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}return $(()=>{n.loadAll()}),(b,t)=>{var w,x,C,D,T,N,V,F,A,E;return a(),r(p,null,[e("div",X,[e("div",Y,[e("div",Z,[e("div",I,[e("div",ee,[t[7]||(t[7]=e("h2",{class:"mb-0"},[e("i",{class:"bi bi-list-check me-2"}),d("Historique de mes achats")],-1)),M(G)]),e("ul",te,[e("li",se,[e("button",{class:k(["nav-link",{active:l(n).activeTab==="catalogues"}]),type:"button",onClick:t[0]||(t[0]=s=>l(n).setActiveTab("catalogues"))},[t[8]||(t[8]=e("i",{class:"bi bi-book me-2"},null,-1)),d("Précommandes ("+o(l(n).commandes.length)+") ",1)],2)]),e("li",ne,[e("button",{class:k(["nav-link",{active:l(n).activeTab==="caisse"}]),type:"button",onClick:t[1]||(t[1]=s=>l(n).setActiveTab("caisse"))},[t[9]||(t[9]=e("i",{class:"bi bi-cart me-2"},null,-1)),d("Caisse ("+o(l(n).ventes.length)+") ",1)],2)])])])]),l(n).error?(a(),r("div",oe,[t[10]||(t[10]=e("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),t[11]||(t[11]=e("strong",null,"Erreur :",-1)),d(" "+o(l(n).error)+" ",1),e("button",{type:"button",class:"btn-close",onClick:t[2]||(t[2]=s=>l(n).error=null)})])):_("",!0),l(n).activeTab==="catalogues"?(a(),r(p,{key:1},[l(n).loading?(a(),r("div",le,[...t[12]||(t[12]=[e("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1),e("p",{class:"mt-3 text-muted"},"Chargement des commandes...",-1)])])):l(n).commandes.length===0?(a(),r("div",ie,[...t[13]||(t[13]=[e("h4",null,"Aucune commande passée",-1),e("p",null,"Vous n'avez encore passé aucune commande.",-1),e("a",{href:"/catalogues/vue",class:"btn btn-primary"},"Consulter les catalogues",-1)])])):(a(),r(p,{key:2},[e("div",ae,[e("div",re,[e("div",de,[t[14]||(t[14]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-search"})],-1)),L(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(n).searchTerm=s),type:"text",class:"form-control",placeholder:"Rechercher une commande..."},null,512),[[R,l(n).searchTerm]])])]),e("div",ce,[e("span",ue,o(l(n).commandes.length)+" commande(s) au total",1)])]),l(n).sortedCommandes.length===0?(a(),r("div",me,[...t[15]||(t[15]=[e("p",null,"Aucune commande ne correspond à votre recherche",-1)])])):(a(),r(p,{key:1},[e("div",be,[e("div",_e,[e("table",pe,[e("thead",ve,[e("tr",null,[(a(),r(p,null,y(g,s=>e("th",{key:s.key,class:"sortable",style:{cursor:"pointer"},onClick:f=>l(n).sortBy(s.key)},[d(o(s.label)+" ",1),e("i",{class:k(["bi","bi-"+l(n).sortIcon(s.key)+" ms-1"])},null,2)],8,he)),64)),t[16]||(t[16]=e("th",null,"Description + Note",-1)),t[17]||(t[17]=e("th",null,"Actions",-1))])]),e("tbody",null,[(a(!0),r(p,null,y(l(n).sortedCommandes,s=>(a(),r("tr",{key:s.id},[e("td",null,[e("strong",null,"#"+o(s.id),1)]),e("td",null,[e("strong",null,o(s.originalname),1),t[18]||(t[18]=e("br",null,null,-1)),e("small",fe,"N°"+o(s.catalog_filesID),1)]),e("td",null,[d(o(s.expiration_formatted||""),1),t[19]||(t[19]=e("br",null,null,-1)),s.isExpired?(a(),r("span",ge,"Expiré")):_("",!0)]),e("td",null,o(s.livraison_formatted||""),1),e("td",null,o(s.created_formatted||""),1),e("td",null,[e("div",null,o(s.catalog_description||""),1),e("div",ye,[t[23]||(t[23]=e("small",{class:"text-muted"},"Note (sauvegarde auto)",-1)),e("span",ke,[l(n).savingNotes[s.id]?(a(),r("span",we,[...t[20]||(t[20]=[e("i",{class:"bi bi-arrow-repeat spin"},null,-1),d(" Sauvegarde...",-1)])])):l(n).savedNotes[s.id]?(a(),r("span",xe,[...t[21]||(t[21]=[e("i",{class:"bi bi-check-circle"},null,-1),d(" Enregistré",-1)])])):l(n).errorNotes[s.id]?(a(),r("span",Ce,[...t[22]||(t[22]=[e("i",{class:"bi bi-exclamation-circle"},null,-1),d(" Erreur",-1)])])):_("",!0)]),e("textarea",{value:s.note,class:"form-control form-control-sm mt-1",rows:"2",placeholder:"Note personnelle...",onInput:f=>m(s.id,f.target.value)},null,40,De)])]),e("td",null,[e("div",Te,[e("a",{href:`/commandes/${s.id}/vue`,class:"btn btn-info btn-sm"},[...t[24]||(t[24]=[e("i",{class:"bi bi-eye"},null,-1),d(" Voir détails",-1)])],8,Ne),s.modifiable?(a(),r("button",{key:0,class:"btn btn-warning btn-sm",onClick:f=>u(s.id)},[...t[25]||(t[25]=[e("i",{class:"bi bi-arrow-counterclockwise"},null,-1),d(" Repasser en panier ",-1)])],8,Ve)):(a(),r("span",Fe,"Non modifiable"))])])]))),128))])])]),t[26]||(t[26]=e("div",{class:"alert alert-secondary mt-3"},[e("strong",null,"Non modifiable"),d(" – Un catalogue associé à une commande peut être expiré ou le référent a choisi de le rendre non modifiable. ")],-1))]),e("div",Ae,[(a(!0),r(p,null,y(l(n).sortedCommandes,s=>(a(),r("div",{key:"m-"+s.id,class:"card mb-2 shadow-sm"},[e("div",Ee,[e("div",Pe,[e("div",$e,[e("div",Me,[e("strong",null,"Cde #"+o(s.id),1),d(" par "+o(s.username||"Utilisateur"),1)]),s.isExpired?(a(),r("span",Le,"Expiré")):_("",!0),e("div",Re,[d(o(s.nb_produits||0)+" produits • ",1),e("strong",null,o((s.montant_total||0).toFixed(2))+" €",1)]),e("div",Se,[t[27]||(t[27]=d("Faite le ",-1)),e("strong",null,o(s.created_formatted||"-"),1)])]),e("div",ze,[e("div",qe,[e("strong",null,"Cat #"+o(s.catalog_filesID),1),d(", "+o(s.originalname),1)]),e("div",Be,[t[28]||(t[28]=d("Expir le ",-1)),e("strong",null,o(s.expiration_formatted||"-"),1),t[29]||(t[29]=d(", livrée le ",-1)),e("strong",null,o(s.livraison_formatted||"-"),1)])])]),s.note?(a(),r("div",Oe,[e("em",null,"Note: "+o(s.note),1)])):_("",!0),s.catalog_description?(a(),r("div",je,o(s.catalog_description),1)):_("",!0),e("div",Ue,[e("a",{href:`/commandes/${s.id}/vue`,class:"btn btn-sm btn-info me-1"},"Détails",8,He),s.modifiable?(a(),r("button",{key:0,class:"btn btn-sm btn-warning",onClick:f=>u(s.id)},"Panier",8,Ke)):_("",!0)])])]))),128)),t[30]||(t[30]=e("div",{class:"alert alert-secondary"},[e("strong",null,"Non modifiable"),d(" – Catalogue expiré ou verrouillé par le référent.")],-1))])],64))],64))],64)):_("",!0),l(n).activeTab==="caisse"?(a(),r(p,{key:2},[l(n).loading?(a(),r("div",Qe,[...t[31]||(t[31]=[e("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1),e("p",{class:"mt-3 text-muted"},"Chargement des achats en caisse...",-1)])])):l(n).ventes.length===0?(a(),r("div",Ge,[...t[32]||(t[32]=[e("h4",null,"Aucun achat en caisse",-1),e("p",null,"Vous n'avez encore fait aucun achat en caisse.",-1),e("a",{href:"/caisse",class:"btn btn-primary"},"Aller à la caisse",-1)])])):(a(),r(p,{key:2},[e("div",Je,[e("div",We,[e("span",Xe,o(l(n).ventes.length)+" achat(s) en caisse",1)])]),e("div",Ye,[e("div",Ze,[e("table",Ie,[t[34]||(t[34]=e("thead",{class:"thead-precommandes"},[e("tr",null,[e("th",{class:"col-ticket"},"N° Ticket"),e("th",null,"Client"),e("th",null,"Produits"),e("th",null,"Montant"),e("th",null,"Mode paiement"),e("th",null,"Date"),e("th",null,"PréCde"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),r(p,null,y(l(n).ventes,s=>(a(),r("tr",{key:s.id},[e("td",et,[e("strong",null,o(s.numero_ticket),1)]),e("td",null,o(s.nom_client||"Anonyme"),1),e("td",null,[e("span",tt,o(s.nb_produits)+" article(s)",1),s.produits_preview?(a(),r("br",st)):_("",!0),s.produits_preview?(a(),r("small",nt,o((s.produits_preview||"").slice(0,50))+o((s.produits_preview||"").length>50?"...":""),1)):_("",!0)]),e("td",null,[e("strong",ot,o(parseFloat(s.montant_ttc).toFixed(2))+" €",1)]),e("td",null,o(s.mode_paiement||"N/A"),1),e("td",null,o(s.created_formatted),1),e("td",null,[s.avec_precommandes?(a(),r("span",lt,"Oui")):(a(),r("span",it,"—"))]),e("td",null,[e("button",{class:"btn btn-sm btn-info",onClick:f=>l(n).loadVenteDetail(s.id)},[...t[33]||(t[33]=[e("i",{class:"bi bi-eye"},null,-1),d(" Détails",-1)])],8,at)])]))),128))])])])]),e("div",rt,[(a(!0),r(p,null,y(l(n).ventes,s=>(a(),r("div",{key:"vm-"+s.id,class:"card mb-3 shadow-sm"},[e("div",dt,[e("div",ct,[e("h6",ut,[t[35]||(t[35]=e("i",{class:"bi bi-receipt me-1"},null,-1)),d(o(s.numero_ticket),1)]),e("span",mt,o(parseFloat(s.montant_ttc).toFixed(2))+" €",1)]),e("p",bt,[t[36]||(t[36]=e("strong",null,"Client:",-1)),d(" "+o(s.nom_client||"Anonyme"),1),t[37]||(t[37]=e("br",null,null,-1)),t[38]||(t[38]=e("strong",null,"Articles:",-1)),d(" "+o(s.nb_produits),1),t[39]||(t[39]=e("br",null,null,-1)),s.produits_preview?(a(),r("small",_t,o((s.produits_preview||"").slice(0,60))+o((s.produits_preview||"").length>60?"...":""),1)):_("",!0),s.produits_preview?(a(),r("br",pt)):_("",!0),t[40]||(t[40]=e("strong",null,"Paiement:",-1)),d(" "+o(s.mode_paiement||"N/A"),1),t[41]||(t[41]=e("br",null,null,-1)),e("small",vt,o(s.created_formatted),1)]),e("div",ht,[e("button",{class:"btn btn-sm btn-info",onClick:f=>l(n).loadVenteDetail(s.id)},[...t[42]||(t[42]=[e("i",{class:"bi bi-eye me-1"},null,-1),d("Voir détails",-1)])],8,ft)])])]))),128))])],64))],64)):_("",!0)])]),l(n).showDetailModal&&l(n).selectedVente?(a(),r("div",gt,[e("div",yt,[e("div",kt,[e("div",wt,[e("h5",xt,[t[43]||(t[43]=e("i",{class:"bi bi-receipt me-2"},null,-1)),d(" Détail vente "+o((w=l(n).selectedVente.vente)==null?void 0:w.numero_ticket),1)]),e("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=s=>l(n).closeDetailModal())})]),e("div",Ct,[e("div",Dt,[e("div",Tt,[t[48]||(t[48]=e("h6",null,"Informations générales",-1)),e("dl",Nt,[t[44]||(t[44]=e("dt",{class:"col-sm-4"},"Date/Heure",-1)),e("dd",Vt,o(h((x=l(n).selectedVente.vente)==null?void 0:x.created_at)),1),t[45]||(t[45]=e("dt",{class:"col-sm-4"},"Caissier",-1)),e("dd",Ft,o(((C=l(n).selectedVente.vente)==null?void 0:C.caissier_nom)||"N/A"),1),t[46]||(t[46]=e("dt",{class:"col-sm-4"},"Client",-1)),e("dd",At,o(((D=l(n).selectedVente.vente)==null?void 0:D.client_nom)||((T=l(n).selectedVente.vente)==null?void 0:T.nom_client)||"Anonyme"),1),t[47]||(t[47]=e("dt",{class:"col-sm-4"},"Montant total",-1)),e("dd",Et,[e("strong",Pt,o(parseFloat(((N=l(n).selectedVente.vente)==null?void 0:N.montant_ttc)||0).toFixed(2))+" €",1)])])])]),t[53]||(t[53]=e("h6",null,"Produits vendus",-1)),e("div",$t,[e("table",Mt,[t[50]||(t[50]=e("thead",{class:"thead-precommandes"},[e("tr",null,[e("th",null,"Produit"),e("th",{class:"text-end"},"Quantité"),e("th",{class:"text-end"},"Prix unitaire"),e("th",{class:"text-end"},"Total")])],-1)),e("tbody",null,[(a(!0),r(p,null,y(l(n).selectedVente.lignes||[],(s,f)=>(a(),r("tr",{key:f,class:k({"table-warning":s.is_avoir})},[e("td",null,[d(o(s.nom_produit||s.product_nom_actuel)+" ",1),s.is_avoir?(a(),r("span",Lt,"AVOIR")):_("",!0)]),e("td",Rt,o(parseFloat(s.quantite).toFixed(3)),1),e("td",St,o(parseFloat(s.prix_unitaire).toFixed(2))+" €",1),e("td",zt,[e("strong",{class:k(s.is_avoir?"text-warning":"text-primary")},o(parseFloat(s.montant_ttc).toFixed(2))+" €",3)])],2))),128))]),e("tfoot",qt,[e("tr",null,[t[49]||(t[49]=e("td",{colspan:"3",class:"text-end"},[e("strong",null,"Total")],-1)),e("td",Bt,[e("strong",Ot,o(parseFloat(((V=l(n).selectedVente.vente)==null?void 0:V.montant_ttc)||0).toFixed(2))+" €",1)])])])])]),(F=l(n).selectedVente.paiements)!=null&&F.length?(a(),r(p,{key:0},[t[52]||(t[52]=e("h6",null,"Paiements",-1)),e("div",jt,[e("table",Ut,[t[51]||(t[51]=e("thead",{class:"thead-precommandes"},[e("tr",null,[e("th",null,"Mode"),e("th",{class:"text-end"},"Montant"),e("th",null,"Date")])],-1)),e("tbody",null,[(a(!0),r(p,null,y(l(n).selectedVente.paiements,(s,f)=>(a(),r("tr",{key:f},[e("td",null,o(s.mode_paiement_nom),1),e("td",Ht,[e("strong",null,o(parseFloat(s.montant).toFixed(2))+" €",1)]),e("td",null,o(h(s.date_paiement)),1)]))),128))])])])],64)):_("",!0)]),e("div",Kt,[e("a",{href:`/api/${(E=(A=l(n).selectedVente)==null?void 0:A.vente)==null?void 0:E.id}/pdf`,class:"btn btn-outline-primary",download:"",target:"_blank",rel:"noopener noreferrer"},[...t[54]||(t[54]=[e("i",{class:"bi bi-file-earmark-pdf me-1"},null,-1),d("Télécharger PDF ",-1)])],8,Qt),e("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=s=>{var f;return v((f=l(n).selectedVente.vente)==null?void 0:f.id)})},[...t[55]||(t[55]=[e("i",{class:"bi bi-envelope-fill me-1"},null,-1),d("Envoyer par email ",-1)])]),e("button",{type:"button",class:"btn btn-secondary",onClick:t[6]||(t[6]=s=>l(n).closeDetailModal())},"Fermer")])])])])):_("",!0)],64)}}},Jt=J(Gt,[["__scopeId","data-v-bfbfd46a"]]),P=S(Jt);P.use(q());P.mount("#commandes-app");
