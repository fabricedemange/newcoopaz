import{i as R,o as a,c as r,a as e,b as d,u as l,n as k,t as o,d as p,F as g,e as L,v as S,k as y,h as z}from"./chunks/runtime-dom.esm-bundler-BlMAuMpH.js";import{d as q,c as B}from"./chunks/pinia-BNknc8Vm.js";import{s as O,b as U,r as H,c as K,d as j,e as Q,A as G}from"./chunks/index-BkeVkIvb.js";import{_ as J}from"./chunks/_plugin-vue_export-helper-DlAUqK2U.js";const W=q("commandes",{state:()=>({loading:!1,error:null,authRequired:!1,commandes:[],ventes:[],activeTab:"catalogues",searchTerm:"",sortColumn:"created_at",sortDirection:"desc",savingNotes:{},savedNotes:{},errorNotes:{},showDetailModal:!1,selectedVente:null}),getters:{filteredCommandes(i){let n=[...i.commandes];if(i.searchTerm){const f=i.searchTerm.toLowerCase();n=n.filter(u=>u.originalname&&u.originalname.toLowerCase().includes(f)||u.catalog_description&&u.catalog_description.toLowerCase().includes(f)||u.note&&u.note.toLowerCase().includes(f)||String(u.id).includes(f))}return n},sortedCommandes(i){let n=[...i.commandes||[]];if(i.searchTerm){const _=i.searchTerm.toLowerCase();n=n.filter(c=>c.originalname&&c.originalname.toLowerCase().includes(_)||c.catalog_description&&c.catalog_description.toLowerCase().includes(_)||c.note&&c.note.toLowerCase().includes(_)||String(c.id).includes(_))}const f=i.sortColumn,u=i.sortDirection;return n.sort((_,c)=>{let h,v;switch(f){case"id":h=_.id,v=c.id;break;case"catalogue":h=(_.originalname||"").toLowerCase(),v=(c.originalname||"").toLowerCase();break;case"expiration_date":h=_.expiration_date?new Date(_.expiration_date).getTime():0,v=c.expiration_date?new Date(c.expiration_date).getTime():0;break;case"date_livraison":h=_.date_livraison?new Date(_.date_livraison).getTime():0,v=c.date_livraison?new Date(c.date_livraison).getTime():0;break;case"created_at":h=_.created_at?new Date(_.created_at).getTime():0,v=c.created_at?new Date(c.created_at).getTime():0;break;default:return 0}if(typeof h=="string"){const m=h.localeCompare(v);return u==="asc"?m:-m}return u==="asc"?h>v?1:h<v?-1:0:h<v?1:h>v?-1:0})},sortIcon(i){return n=>i.sortColumn!==n?"arrow-down-up":i.sortDirection==="asc"?"arrow-up":"arrow-down"}},actions:{async loadAll(){this.loading=!0,this.error=null,this.authRequired=!1;try{const[i,n]=await Promise.all([j(),Q()]);i.success&&(this.commandes=i.commandes||[]),n.success&&(this.ventes=n.ventes||[])}catch(i){this.error=i.message,i.code===G&&(this.authRequired=!0),console.error("commandes loadAll:",i)}finally{this.loading=!1}},setActiveTab(i){this.activeTab=i},setSearchTerm(i){this.searchTerm=i},sortBy(i){this.sortColumn===i?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=i,this.sortDirection="asc")},async saveNote(i,n,f){this.savingNotes[i]=!0,delete this.savedNotes[i],delete this.errorNotes[i];try{await K(i,n,f);const u=this.commandes.find(_=>_.id===i);u&&(u.note=n),this.savedNotes[i]=!0,setTimeout(()=>{delete this.savedNotes[i]},2e3)}catch(u){this.errorNotes[i]=!0,setTimeout(()=>delete this.errorNotes[i],3e3),console.error("saveNote:",u)}finally{delete this.savingNotes[i]}},async reopenCommande(i,n){await H(i,n),typeof window<"u"&&window.location.reload()},async loadVenteDetail(i){try{const n=await U(i);if(n.success)this.selectedVente=n,this.showDetailModal=!0;else throw new Error(n.error||"Erreur chargement détail")}catch(n){console.error("loadVenteDetail:",n),typeof window<"u"&&alert("Erreur : "+n.message)}},closeDetailModal(){this.showDetailModal=!1,this.selectedVente=null},async sendTicketPDF(i){try{const n=await O(i);if(n.success&&typeof window<"u")alert("Email envoyé avec succès.");else throw new Error(n.error||"Erreur envoi")}catch(n){console.error("sendTicketPDF:",n),typeof window<"u"&&alert("Erreur : "+n.message)}}}}),X={class:"admin-content-wrapper"},Y={class:"container-fluid mt-4"},Z={class:"row mb-4"},I={class:"col-12"},ee={class:"nav nav-tabs mb-4",role:"tablist"},te={class:"nav-item",role:"presentation"},se={class:"nav-item",role:"presentation"},ne={key:0,class:"alert alert-danger alert-dismissible fade show"},oe={key:0,class:"text-center py-5"},le={key:1,class:"alert alert-info text-center"},ie={class:"row mb-3"},ae={class:"col-md-6"},re={class:"input-group"},de={class:"col-md-6 text-end"},ue={class:"text-muted"},ce={key:0,class:"alert alert-warning text-center"},me={class:"d-none d-md-block"},be={class:"table-responsive"},_e={class:"table table-hover"},pe={class:"table-dark"},ve=["onClick"],ge={class:"text-muted"},he={key:0,class:"badge bg-danger"},fe={class:"mt-2"},ye={class:"ms-2"},ke={key:0,class:"text-info"},we={key:1,class:"text-success"},xe={key:2,class:"text-danger"},Ce=["value","onInput"],De={class:"d-flex flex-column gap-1"},Te=["href"],Ne=["onClick"],Ve={key:1,class:"badge bg-secondary"},Fe={class:"d-md-none"},Ae={class:"card-body p-2",style:{"font-size":"0.7rem"}},Ee={class:"row g-1 mb-2"},Pe={class:"col-6 text-start"},$e={class:"mb-1"},Me={key:0,class:"badge bg-danger",style:{"font-size":"0.6rem"}},Re={class:"mb-1",style:{"font-size":"0.65rem"}},Le={style:{"font-size":"0.65rem"}},Se={class:"col-6 text-end"},ze={class:"mb-1"},qe={style:{"font-size":"0.65rem"}},Be={key:0,class:"mb-2",style:{"font-size":"0.65rem"}},Oe={key:1,class:"text-muted mb-2",style:{"font-size":"0.65rem"}},Ue={class:"text-center"},He=["href"],Ke=["onClick"],je={key:0,class:"text-center py-5"},Qe={key:1,class:"alert alert-info text-center"},Ge={class:"row mb-3"},Je={class:"col-12 text-end"},We={class:"text-muted"},Xe={class:"d-none d-md-block"},Ye={class:"table-responsive"},Ze={class:"table table-hover"},Ie={class:"badge bg-secondary"},et={key:0},tt={key:1,class:"text-muted"},st={class:"text-primary"},nt=["onClick"],ot={class:"d-md-none"},lt={class:"card-body"},it={class:"d-flex justify-content-between align-items-start mb-2"},at={class:"card-title mb-0"},rt={class:"badge bg-success"},dt={class:"card-text mb-1"},ut={key:0,class:"text-muted"},ct={key:1},mt={class:"text-muted"},bt={class:"text-center mt-2"},_t=["onClick"],pt={key:0,class:"modal show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"}},vt={class:"modal-dialog modal-xl"},gt={class:"modal-content"},ht={class:"modal-header"},ft={class:"modal-title"},yt={class:"modal-body"},kt={class:"row mb-4"},wt={class:"col-md-6"},xt={class:"row"},Ct={class:"col-sm-8"},Dt={class:"col-sm-8"},Tt={class:"col-sm-8"},Nt={class:"col-sm-8"},Vt={class:"text-primary"},Ft={key:0,class:"col-md-6"},At={class:"row"},Et={class:"col-sm-8"},Pt={class:"badge bg-info"},$t={class:"col-sm-8"},Mt={class:"table-responsive mb-4"},Rt={class:"table table-sm table-bordered"},Lt={key:0,class:"badge bg-warning text-dark ms-2"},St={class:"text-end"},zt={class:"text-end"},qt={class:"text-end"},Bt={class:"table-light"},Ot={class:"text-end"},Ut={class:"text-primary"},Ht={class:"table-responsive"},Kt={class:"table table-sm"},jt={class:"text-end"},Qt={class:"modal-footer"},Gt={__name:"CommandesPage",setup(i){const n=W(),f=[{key:"id",label:"ID"},{key:"catalogue",label:"Catalogue"},{key:"expiration_date",label:"Expiration"},{key:"date_livraison",label:"Livraison"},{key:"created_at",label:"Date commande"}];let u={};function _(m,t){u[m]&&clearTimeout(u[m]),u[m]=setTimeout(()=>{n.saveNote(m,t,typeof window<"u"?window.CSRF_TOKEN:""),delete u[m]},1e3)}function c(m){confirm("Confirmer la réouverture de cette commande en panier ?")&&n.reopenCommande(m,typeof window<"u"?window.CSRF_TOKEN:"")}function h(m){m&&confirm("Envoyer le ticket par email ?")&&n.sendTicketPDF(m)}function v(m){return m?new Date(m).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}return R(()=>{n.loadAll()}),(m,t)=>{var w,x,C,D,T,N,V,F,A,E,P;return a(),r(g,null,[e("div",X,[e("div",Y,[e("button",{class:"btn btn-outline-secondary d-md-none mb-3",onClick:t[0]||(t[0]=s=>{var b,$;return(($=(b=m.$router)==null?void 0:b.back)==null?void 0:$.call(b))||m.history.back()})},[...t[8]||(t[8]=[e("i",{class:"bi bi-arrow-left me-2"},null,-1),d("Retour ",-1)])]),e("div",Z,[e("div",I,[t[11]||(t[11]=e("h2",{class:"mb-4"},[e("i",{class:"bi bi-list-check me-2"}),d("Historique de mes achats")],-1)),e("ul",ee,[e("li",te,[e("button",{class:k(["nav-link",{active:l(n).activeTab==="catalogues"}]),type:"button",onClick:t[1]||(t[1]=s=>l(n).setActiveTab("catalogues"))},[t[9]||(t[9]=e("i",{class:"bi bi-book me-2"},null,-1)),d("Catalogues ("+o(l(n).commandes.length)+") ",1)],2)]),e("li",se,[e("button",{class:k(["nav-link",{active:l(n).activeTab==="caisse"}]),type:"button",onClick:t[2]||(t[2]=s=>l(n).setActiveTab("caisse"))},[t[10]||(t[10]=e("i",{class:"bi bi-cart me-2"},null,-1)),d("Caisse ("+o(l(n).ventes.length)+") ",1)],2)])])])]),l(n).error?(a(),r("div",ne,[t[12]||(t[12]=e("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),t[13]||(t[13]=e("strong",null,"Erreur :",-1)),d(" "+o(l(n).error)+" ",1),e("button",{type:"button",class:"btn-close",onClick:t[3]||(t[3]=s=>l(n).error=null)})])):p("",!0),l(n).activeTab==="catalogues"?(a(),r(g,{key:1},[l(n).loading?(a(),r("div",oe,[...t[14]||(t[14]=[e("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1),e("p",{class:"mt-3 text-muted"},"Chargement des commandes...",-1)])])):l(n).commandes.length===0?(a(),r("div",le,[...t[15]||(t[15]=[e("h4",null,"Aucune commande passée",-1),e("p",null,"Vous n'avez encore passé aucune commande.",-1),e("a",{href:"/catalogues/vue",class:"btn btn-primary"},"Consulter les catalogues",-1)])])):(a(),r(g,{key:2},[e("div",ie,[e("div",ae,[e("div",re,[t[16]||(t[16]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-search"})],-1)),L(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(n).searchTerm=s),type:"text",class:"form-control",placeholder:"Rechercher une commande..."},null,512),[[S,l(n).searchTerm]])])]),e("div",de,[e("span",ue,o(l(n).commandes.length)+" commande(s) au total",1)])]),l(n).sortedCommandes.length===0?(a(),r("div",ce,[...t[17]||(t[17]=[e("p",null,"Aucune commande ne correspond à votre recherche",-1)])])):(a(),r(g,{key:1},[e("div",me,[e("div",be,[e("table",_e,[e("thead",pe,[e("tr",null,[(a(),r(g,null,y(f,s=>e("th",{key:s.key,class:"sortable",style:{cursor:"pointer"},onClick:b=>l(n).sortBy(s.key)},[d(o(s.label)+" ",1),e("i",{class:k(["bi","bi-"+l(n).sortIcon(s.key)+" ms-1"])},null,2)],8,ve)),64)),t[18]||(t[18]=e("th",null,"Description + Note",-1)),t[19]||(t[19]=e("th",null,"Actions",-1))])]),e("tbody",null,[(a(!0),r(g,null,y(l(n).sortedCommandes,s=>(a(),r("tr",{key:s.id},[e("td",null,[e("strong",null,"#"+o(s.id),1)]),e("td",null,[e("strong",null,o(s.originalname),1),t[20]||(t[20]=e("br",null,null,-1)),e("small",ge,"N°"+o(s.catalog_filesID),1)]),e("td",null,[d(o(s.expiration_formatted||""),1),t[21]||(t[21]=e("br",null,null,-1)),s.isExpired?(a(),r("span",he,"Expiré")):p("",!0)]),e("td",null,o(s.livraison_formatted||""),1),e("td",null,o(s.created_formatted||""),1),e("td",null,[e("div",null,o(s.catalog_description||""),1),e("div",fe,[t[25]||(t[25]=e("small",{class:"text-muted"},"Note (sauvegarde auto)",-1)),e("span",ye,[l(n).savingNotes[s.id]?(a(),r("span",ke,[...t[22]||(t[22]=[e("i",{class:"bi bi-arrow-repeat spin"},null,-1),d(" Sauvegarde...",-1)])])):l(n).savedNotes[s.id]?(a(),r("span",we,[...t[23]||(t[23]=[e("i",{class:"bi bi-check-circle"},null,-1),d(" Enregistré",-1)])])):l(n).errorNotes[s.id]?(a(),r("span",xe,[...t[24]||(t[24]=[e("i",{class:"bi bi-exclamation-circle"},null,-1),d(" Erreur",-1)])])):p("",!0)]),e("textarea",{value:s.note,class:"form-control form-control-sm mt-1",rows:"2",placeholder:"Note personnelle...",onInput:b=>_(s.id,b.target.value)},null,40,Ce)])]),e("td",null,[e("div",De,[e("a",{href:`/commandes/${s.id}/vue`,class:"btn btn-info btn-sm"},[...t[26]||(t[26]=[e("i",{class:"bi bi-eye"},null,-1),d(" Voir détails",-1)])],8,Te),s.modifiable?(a(),r("button",{key:0,class:"btn btn-warning btn-sm",onClick:b=>c(s.id)},[...t[27]||(t[27]=[e("i",{class:"bi bi-arrow-counterclockwise"},null,-1),d(" Repasser en panier ",-1)])],8,Ne)):(a(),r("span",Ve,"Non modifiable"))])])]))),128))])])]),t[28]||(t[28]=e("div",{class:"alert alert-secondary mt-3"},[e("strong",null,"Non modifiable"),d(" – Un catalogue associé à une commande peut être expiré ou le référent a choisi de le rendre non modifiable. ")],-1))]),e("div",Fe,[(a(!0),r(g,null,y(l(n).sortedCommandes,s=>(a(),r("div",{key:"m-"+s.id,class:"card mb-2 shadow-sm"},[e("div",Ae,[e("div",Ee,[e("div",Pe,[e("div",$e,[e("strong",null,"Cde #"+o(s.id),1),d(" par "+o(s.username||"Utilisateur"),1)]),s.isExpired?(a(),r("span",Me,"Expiré")):p("",!0),e("div",Re,[d(o(s.nb_produits||0)+" produits • ",1),e("strong",null,o((s.montant_total||0).toFixed(2))+" €",1)]),e("div",Le,[t[29]||(t[29]=d("Faite le ",-1)),e("strong",null,o(s.created_formatted||"-"),1)])]),e("div",Se,[e("div",ze,[e("strong",null,"Cat #"+o(s.catalog_filesID),1),d(", "+o(s.originalname),1)]),e("div",qe,[t[30]||(t[30]=d("Expir le ",-1)),e("strong",null,o(s.expiration_formatted||"-"),1),t[31]||(t[31]=d(", livrée le ",-1)),e("strong",null,o(s.livraison_formatted||"-"),1)])])]),s.note?(a(),r("div",Be,[e("em",null,"Note: "+o(s.note),1)])):p("",!0),s.catalog_description?(a(),r("div",Oe,o(s.catalog_description),1)):p("",!0),e("div",Ue,[e("a",{href:`/commandes/${s.id}/vue`,class:"btn btn-sm btn-info me-1"},"Détails",8,He),s.modifiable?(a(),r("button",{key:0,class:"btn btn-sm btn-warning",onClick:b=>c(s.id)},"Panier",8,Ke)):p("",!0)])])]))),128)),t[32]||(t[32]=e("div",{class:"alert alert-secondary"},[e("strong",null,"Non modifiable"),d(" – Catalogue expiré ou verrouillé par le référent.")],-1))])],64))],64))],64)):p("",!0),l(n).activeTab==="caisse"?(a(),r(g,{key:2},[l(n).loading?(a(),r("div",je,[...t[33]||(t[33]=[e("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1),e("p",{class:"mt-3 text-muted"},"Chargement des achats en caisse...",-1)])])):l(n).ventes.length===0?(a(),r("div",Qe,[...t[34]||(t[34]=[e("h4",null,"Aucun achat en caisse",-1),e("p",null,"Vous n'avez encore fait aucun achat en caisse.",-1),e("a",{href:"/caisse",class:"btn btn-primary"},"Aller à la caisse",-1)])])):(a(),r(g,{key:2},[e("div",Ge,[e("div",Je,[e("span",We,o(l(n).ventes.length)+" achat(s) en caisse",1)])]),e("div",Xe,[e("div",Ye,[e("table",Ze,[t[36]||(t[36]=e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"N° Ticket"),e("th",null,"Client"),e("th",null,"Produits"),e("th",null,"Montant"),e("th",null,"Mode paiement"),e("th",null,"Date"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),r(g,null,y(l(n).ventes,s=>(a(),r("tr",{key:s.id},[e("td",null,[e("strong",null,o(s.numero_ticket),1)]),e("td",null,o(s.nom_client||"Anonyme"),1),e("td",null,[e("span",Ie,o(s.nb_produits)+" article(s)",1),s.produits_preview?(a(),r("br",et)):p("",!0),s.produits_preview?(a(),r("small",tt,o((s.produits_preview||"").slice(0,50))+o((s.produits_preview||"").length>50?"...":""),1)):p("",!0)]),e("td",null,[e("strong",st,o(parseFloat(s.montant_ttc).toFixed(2))+" €",1)]),e("td",null,o(s.mode_paiement||"N/A"),1),e("td",null,o(s.created_formatted),1),e("td",null,[e("button",{class:"btn btn-sm btn-info",onClick:b=>l(n).loadVenteDetail(s.id)},[...t[35]||(t[35]=[e("i",{class:"bi bi-eye"},null,-1),d(" Détails",-1)])],8,nt)])]))),128))])])])]),e("div",ot,[(a(!0),r(g,null,y(l(n).ventes,s=>(a(),r("div",{key:"vm-"+s.id,class:"card mb-3 shadow-sm"},[e("div",lt,[e("div",it,[e("h6",at,[t[37]||(t[37]=e("i",{class:"bi bi-receipt me-1"},null,-1)),d(o(s.numero_ticket),1)]),e("span",rt,o(parseFloat(s.montant_ttc).toFixed(2))+" €",1)]),e("p",dt,[t[38]||(t[38]=e("strong",null,"Client:",-1)),d(" "+o(s.nom_client||"Anonyme"),1),t[39]||(t[39]=e("br",null,null,-1)),t[40]||(t[40]=e("strong",null,"Articles:",-1)),d(" "+o(s.nb_produits),1),t[41]||(t[41]=e("br",null,null,-1)),s.produits_preview?(a(),r("small",ut,o((s.produits_preview||"").slice(0,60))+o((s.produits_preview||"").length>60?"...":""),1)):p("",!0),s.produits_preview?(a(),r("br",ct)):p("",!0),t[42]||(t[42]=e("strong",null,"Paiement:",-1)),d(" "+o(s.mode_paiement||"N/A"),1),t[43]||(t[43]=e("br",null,null,-1)),e("small",mt,o(s.created_formatted),1)]),e("div",bt,[e("button",{class:"btn btn-sm btn-info",onClick:b=>l(n).loadVenteDetail(s.id)},[...t[44]||(t[44]=[e("i",{class:"bi bi-eye me-1"},null,-1),d("Voir détails",-1)])],8,_t)])])]))),128))])],64))],64)):p("",!0)])]),l(n).showDetailModal&&l(n).selectedVente?(a(),r("div",pt,[e("div",vt,[e("div",gt,[e("div",ht,[e("h5",ft,[t[45]||(t[45]=e("i",{class:"bi bi-receipt me-2"},null,-1)),d(" Détail vente "+o((w=l(n).selectedVente.vente)==null?void 0:w.numero_ticket),1)]),e("button",{type:"button",class:"btn-close",onClick:t[5]||(t[5]=s=>l(n).closeDetailModal())})]),e("div",yt,[e("div",kt,[e("div",wt,[t[50]||(t[50]=e("h6",null,"Informations générales",-1)),e("dl",xt,[t[46]||(t[46]=e("dt",{class:"col-sm-4"},"Date/Heure",-1)),e("dd",Ct,o(v((x=l(n).selectedVente.vente)==null?void 0:x.created_at)),1),t[47]||(t[47]=e("dt",{class:"col-sm-4"},"Caissier",-1)),e("dd",Dt,o(((C=l(n).selectedVente.vente)==null?void 0:C.caissier_nom)||"N/A"),1),t[48]||(t[48]=e("dt",{class:"col-sm-4"},"Client",-1)),e("dd",Tt,o(((D=l(n).selectedVente.vente)==null?void 0:D.client_nom)||((T=l(n).selectedVente.vente)==null?void 0:T.nom_client)||"Anonyme"),1),t[49]||(t[49]=e("dt",{class:"col-sm-4"},"Montant total",-1)),e("dd",Nt,[e("strong",Vt,o(parseFloat(((N=l(n).selectedVente.vente)==null?void 0:N.montant_ttc)||0).toFixed(2))+" €",1)])])]),(V=l(n).selectedVente.vente)!=null&&V.panier_id?(a(),r("div",Ft,[t[53]||(t[53]=e("h6",null,"Informations panier",-1)),e("dl",At,[t[51]||(t[51]=e("dt",{class:"col-sm-4"},"Source",-1)),e("dd",Et,[e("span",Pt,o(((F=l(n).selectedVente.vente)==null?void 0:F.panier_source)||"N/A"),1)]),t[52]||(t[52]=e("dt",{class:"col-sm-4"},"Sauvegardé le",-1)),e("dd",$t,o(v((A=l(n).selectedVente.vente)==null?void 0:A.panier_saved_at)),1)])])):p("",!0)]),t[58]||(t[58]=e("h6",null,"Produits vendus",-1)),e("div",Mt,[e("table",Rt,[t[55]||(t[55]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Produit"),e("th",{class:"text-end"},"Quantité"),e("th",{class:"text-end"},"Prix unitaire"),e("th",{class:"text-end"},"Total")])],-1)),e("tbody",null,[(a(!0),r(g,null,y(l(n).selectedVente.lignes||[],(s,b)=>(a(),r("tr",{key:b,class:k({"table-warning":s.is_avoir})},[e("td",null,[d(o(s.nom_produit||s.product_nom_actuel)+" ",1),s.is_avoir?(a(),r("span",Lt,"AVOIR")):p("",!0)]),e("td",St,o(parseFloat(s.quantite).toFixed(3)),1),e("td",zt,o(parseFloat(s.prix_unitaire).toFixed(2))+" €",1),e("td",qt,[e("strong",{class:k(s.is_avoir?"text-warning":"text-primary")},o(parseFloat(s.montant_ttc).toFixed(2))+" €",3)])],2))),128))]),e("tfoot",Bt,[e("tr",null,[t[54]||(t[54]=e("td",{colspan:"3",class:"text-end"},[e("strong",null,"Total")],-1)),e("td",Ot,[e("strong",Ut,o(parseFloat(((E=l(n).selectedVente.vente)==null?void 0:E.montant_ttc)||0).toFixed(2))+" €",1)])])])])]),(P=l(n).selectedVente.paiements)!=null&&P.length?(a(),r(g,{key:0},[t[57]||(t[57]=e("h6",null,"Paiements",-1)),e("div",Ht,[e("table",Kt,[t[56]||(t[56]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Mode"),e("th",{class:"text-end"},"Montant"),e("th",null,"Date")])],-1)),e("tbody",null,[(a(!0),r(g,null,y(l(n).selectedVente.paiements,(s,b)=>(a(),r("tr",{key:b},[e("td",null,o(s.mode_paiement_nom),1),e("td",jt,[e("strong",null,o(parseFloat(s.montant).toFixed(2))+" €",1)]),e("td",null,o(v(s.date_paiement)),1)]))),128))])])])],64)):p("",!0)]),e("div",Qt,[e("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=s=>{var b;return h((b=l(n).selectedVente.vente)==null?void 0:b.id)})},[...t[59]||(t[59]=[e("i",{class:"bi bi-envelope-fill me-1"},null,-1),d("Envoyer par email ",-1)])]),e("button",{type:"button",class:"btn btn-secondary",onClick:t[7]||(t[7]=s=>l(n).closeDetailModal())},"Fermer")])])])])):p("",!0)],64)}}},Jt=J(Gt,[["__scopeId","data-v-44e15958"]]),M=z(Jt);M.use(B());M.mount("#commandes-app");
