import{i as v,o,c as a,a as t,b as d,t as l,d as g,F as c,k as f,r as m,h as y}from"./chunks/runtime-dom.esm-bundler-CPobOing.js";import{g as h}from"./chunks/index-zlPV8JO4.js";const k={class:"admin-content-wrapper"},N={class:"container-fluid mt-4"},_={key:0,class:"alert alert-danger alert-dismissible fade show"},x={key:1,class:"text-center py-5"},w={key:2,class:"alert alert-info text-center"},C={class:"text-muted mb-3"},F={class:"table-responsive"},q={class:"table table-hover"},D={__name:"CotisationHistoriquePage",setup(E){const u=m(!0),i=m(null),r=m([]);function p(n){if(!n)return"—";const e=new Date(n);return isNaN(e.getTime())?n:e.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function b(n){const e=parseFloat(n);return Number.isNaN(e)?"—":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)}return v(async()=>{u.value=!0,i.value=null;try{const n=await h({limit:200});r.value=n.cotisations||[]}catch(n){i.value=n.message||"Erreur chargement historique",r.value=[]}finally{u.value=!1}}),(n,e)=>(o(),a("div",k,[t("div",N,[t("button",{class:"btn btn-outline-secondary d-md-none mb-3",onClick:e[0]||(e[0]=s=>n.history.back())},[...e[2]||(e[2]=[t("i",{class:"bi bi-arrow-left me-2"},null,-1),d("Retour ",-1)])]),e[8]||(e[8]=t("h2",{class:"mb-4 text-precommandes"},[t("i",{class:"bi bi-coin me-2"}),d("Mon historique de cotisation")],-1)),i.value?(o(),a("div",_,[e[3]||(e[3]=t("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),e[4]||(e[4]=t("strong",null,"Erreur :",-1)),d(" "+l(i.value)+" ",1),t("button",{type:"button",class:"btn-close",onClick:e[1]||(e[1]=s=>i.value=null)})])):g("",!0),u.value?(o(),a("div",x,[...e[5]||(e[5]=[t("div",{class:"spinner-border text-precommandes",role:"status",style:{width:"3rem",height:"3rem"}},null,-1),t("p",{class:"mt-3 text-muted"},"Chargement...",-1)])])):r.value.length===0?(o(),a("div",w,[...e[6]||(e[6]=[t("h4",null,"Aucune cotisation enregistrée",-1),t("p",null,"Vous n'avez pas encore de cotisation mensuelle (5-15 €) enregistrée dans l'historique.",-1)])])):(o(),a(c,{key:3},[t("p",C,l(r.value.length)+" cotisation(s) au total",1),t("div",F,[t("table",q,[e[7]||(e[7]=t("thead",{class:"thead-precommandes"},[t("tr",null,[t("th",null,"Date"),t("th",null,"N° ticket"),t("th",null,"Montant")])],-1)),t("tbody",null,[(o(!0),a(c,null,f(r.value,s=>(o(),a("tr",{key:s.vente_id+"-"+(s.date_cotisation||"")},[t("td",null,l(p(s.date_cotisation)),1),t("td",null,l(s.numero_ticket||"—"),1),t("td",null,[t("strong",null,l(b(s.montant_cotisation)),1)])]))),128))])])])],64))])]))}},M=y(D);M.mount("#commandes-cotisation-app");
